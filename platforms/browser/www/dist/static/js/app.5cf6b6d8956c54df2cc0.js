webpackJsonp([1],{IKFS:function(t,e,s){t.exports=s.p+"static/img/scan-qr2-icon.5e0cb23.png"},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),r=s("3EgV"),n=s.n(r),i=s("Xxa5"),o=s.n(i),l=s("exGp"),c=s.n(l),p={name:"bridge-passport-app",data:function(){return{name:"App",qr:null,loading:!0,passport:null,passportLoaded:!1,passportUnlocked:!1}},methods:{openUrl:function(t){window.open(t)},init:function(){var t=c()(o.a.mark(function t(){var e,s,a,r,n,i,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new URLSearchParams(window.location.search),s=e.get("t"),!(a=e.get("v"))){t.next=21;break}if(this.qr=a,"passport"!=s){t.next=19;break}return t.next=8,BridgeProtocol.Services.RequestRelay.getRequest(this.qr);case 8:if(!(r=t.sent)||!r.request){t.next=16;break}return n=window.localStorage,t.next=13,n.setItem("passport",r.request);case 13:this.$router.push({path:"/unlock"}),t.next=17;break;case 16:this.$router.push({path:"/open",query:{}});case 17:t.next=20;break;case 19:"auth"==s&&this.$router.push({path:"/scan",query:{qr:a}});case 20:this.$router.go(1);case 21:n=window.localStorage,i=n.getItem("passport"),l=n.getItem("passphrase"),this.passportLoaded=null!=i,this.passportUnlocked=null!=l,this.passportLoaded?this.passportLoaded&&!this.passportUnlocked&&(this.$router.push({path:"/unlock",query:{}}),this.$router.go(1)):(this.$router.push({path:"/open",query:{}}),this.$router.go(1)),this.loading=!1;case 28:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),unload:function(){var t=window.localStorage;t.removeItem("passphrase"),t.removeItem("passport"),location.href="app.html"},lock:function(){window.localStorage.removeItem("passphrase"),location.href="app.html"}},created:function(){this.$vuetify.theme.dark=!0,this.$vuetify.theme.primary="#673ab7"},mounted:function(){this.$nextTick(function(){this.init()})}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"bridge-passport"}},[t.passportLoaded&&t.passportUnlocked?s("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("v-tabs",{attrs:{dark:""}},[s("v-tab",[s("router-link",{staticClass:"router-link",attrs:{to:"/identity"}},[t._v("Identity")])],1),t._v(" "),s("v-tab",[s("router-link",{staticClass:"router-link",attrs:{to:"/scan"}},[t._v("Scan")])],1),t._v(" "),s("v-tab",[s("router-link",{staticClass:"router-link",attrs:{to:"/request"}},[t._v("Request")])],1)],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-menu",{attrs:{"close-on-click":"","offset-y":"",small:"",dark:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:""}},a),[s("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-dots-vertical")])],1)]}}],null,!1,2291122027)},[t._v(" "),s("v-list",{attrs:{dense:""}},[s("v-subheader",{attrs:{inset:""}},[t._v("Passport Options")]),t._v(" "),s("v-divider",{attrs:{inset:""}}),t._v(" "),s("v-list-item",{attrs:{"two-line":""},on:{click:t.lock}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-lock")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v("Lock Passport")]),t._v(" "),s("v-list-item-subtitle",[t._v("\n                Clear your passphrase but keep the passport json cached for future use\n            ")])],1)],1),t._v(" "),s("v-list-item",{attrs:{"two-line":""},on:{click:t.unload}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-close")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v("Unload Passport")]),t._v(" "),s("v-list-item-subtitle",[t._v("\n                Clear your passphrase and clear the cached the passport json\n            ")])],1)],1),t._v(" "),s("v-divider",{attrs:{inset:""}}),t._v(" "),s("router-link",{staticClass:"router-link",attrs:{to:"/about"}},[s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-information")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v("About Bridge Passport")])],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),s("v-main",[s("v-container",{staticClass:"fill-height justify-center text-center inverted",attrs:{fluid:""}},[s("v-overlay",{attrs:{value:t.loading}},[s("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),t._v(" "),s("router-view")],1)],1)],1)},staticRenderFns:[]},d=s("VU/8")(p,u,!1,null,null,null).exports,v=s("/ocq"),m={data:function(){return{passportId:null}},methods:{init:function(){var t=c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,BridgeMobile.getPassportContext();case 2:(e=t.sent).passport&&(this.passportId=e.passport.id);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.$nextTick(function(){this.init()})}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{"fill-height":"","justify-center":""}},[e("div",[e("img",{attrs:{src:s("ibFO")}}),this._v(" "),e("div",{staticClass:"mt-2"},[this._v("\n            "+this._s(this.passportId)+"\n        ")])])])},staticRenderFns:[]},f=s("VU/8")(m,h,!1,null,null,null).exports,g={data:function(){return{visible:!0,currentYear:(new Date).getFullYear(),version:"1.0.0"}},methods:{openUrl:function(t){window.open(t)},close:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("v-app-bar",{staticClass:"text-center",attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("h3",[t._v("About Bridge Passport Mobile")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-icon",{on:{click:t.close}},[t._v("mdi-close")])],1),t._v(" "),s("v-card",{staticStyle:{position:"absolute",top:"60px"}},[s("v-card-text",{staticClass:"inverted text-left"},[s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Version Info")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v("\n                "+t._s(t.version)+"\n            ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("License")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v('\n                This software is licensed under the Apache 2.0 License and is being provided to you on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  Bridge Protocol Corporation will not be held liable for any loss or damages resulting from the use of this software.  If you do not agree with these terms, you must stop using this software immediately.  Please review the '),s("a",{on:{click:function(e){return t.openUrl("https://bridge-protocol.github.io/docs/license")}}},[t._v("Bridge Network terms of service")]),t._v(" and "),s("a",{on:{click:function(e){return t.openUrl("https://bridge-protocol.github.io/docs/tos")}}},[t._v("open source license")]),t._v(" before using this software.\n            ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Limitation of Liability")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v("\n                It is your responsibility to ensure that you backup your passport and associated blockchain wallet private keys.  Bridge Protocol Corporation will not be held responsible for loss of funds, verified claims data, or any other damages resulting from the use of this software.\n            ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Assignment of Copyright")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v('\n                This software, "Bridge" Logo, and any other related content are Copyright Â©2018-'),s("span",[t._v(t._s(t.currentYear))]),t._v(" Bridge Protocol Corporation, All Rights Reserved.  Some portions of this software and logos are copyright to their respective owners.\n            ")]),t._v(" "),s("div",{staticClass:"text-center"},[s("v-btn",{on:{click:t.close}},[t._v("\n                    Close\n                ")])],1)],1)],1)],1)},staticRenderFns:[]},b=s("VU/8")(g,_,!1,null,null,null).exports,x={props:["qr"],data:function(){return{qrcode:null,id:null,loading:!1,loadStatus:"Please Wait",requestLoaded:!1,requestMessage:null,messageValid:!1,requestingPassport:null,requestedClaimTypes:[],selectedClaimTypes:[],requestSent:!1,error:!1,errorMessage:"An error occurred"}},methods:{init:function(){var t=this;return c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t,t.loading=!0,setTimeout(c()(o.a.mark(function t(){var e,a,r,n,i,l,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(e=s.qr)&&"undefined"!=e&&0!=e.length){t.next=4;break}return s.loading=!1,t.abrupt("return");case 4:return s.loading=!0,s.loadStatus="Decrypting and Validating Request",s.id=s.qr,t.next=9,BridgeProtocol.Services.RequestRelay.getRequest(s.id);case 9:return a=t.sent,t.next=12,BridgeMobile.validateAuthRequest(a.request);case 12:return s.requestMessage=t.sent,s.messageValid=s.requestMessage.signatureValid,t.next=16,BridgeMobile.getPassportContext();case 16:return r=t.sent,t.next=19,BridgeMobile.getPassportDetails(r.passport,r.passphrase,s.requestMessage.passportId);case 19:return(n=t.sent).name=n.id,n.known=!1,n.partnerName&&n.partnerName.length>0&&(n.name=n.partnerName,n.known=!0),s.requestingPassport=n,t.next=26,BridgeMobile.getClaimTypes(s.requestMessage.payload.claimTypes);case 26:if(i=t.sent)for(l=0;l<i.length;l++)c=r.passport.getClaimPackage(i[l].id),i[l].claim=null!=c;s.requestedClaimTypes=i,s.requestLoaded=!0,s.loading=!1;case 31:case"end":return t.stop()}},t,this)})),500);case 3:case"end":return e.stop()}},e,t)}))()},scan:function(){location.href="index.html?s=true&t=auth"},sendClaims:function(){var t=this;return c()(o.a.mark(function e(){var s,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.selectedClaimTypes.length){e.next=4;break}return t.error=!0,t.errorMessage="You must select at least one claim type.",e.abrupt("return");case 4:return t.loading=!0,t.loadStatus="Encrypting Claims",e.next=8,BridgeMobile.getPassportContext();case 8:return s=e.sent,e.next=11,BridgeMobile.createAuthResponse(s.passport,s.passphrase,t.requestMessage,t.selectedClaimTypes);case 11:return a=e.sent,t.loadStatus="Sending Response",e.next=15,BridgeProtocol.Services.RequestRelay.createResponse(t.id,a);case 15:e.sent,t.requestSent=!0,t.loading=!1;case 18:case"end":return e.stop()}},e,t)}))()},cancel:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)}},mounted:function(){this.$nextTick(c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:case"end":return t.stop()}},t,this)})))}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"justify-center":"",dark:""}},[a("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[a("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Identification Claims Request")])]),t._v(" "),t.loading?a("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[a("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[a("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.loading||!t.requestLoaded||t.requestSent?t._e():a("v-container",{staticStyle:{position:"absolute",top:"10px",left:"0px"},attrs:{"align-top":"","justify-center":"","mt-0":"","pt-0":"","mx-2":"","text-left":""}},[t.messageValid?t._e():a("v-alert",{staticClass:"text-left caption text-wrap mx-n6 mt-n4",attrs:{border:"left","colored-border":"",type:"warning",elevation:"0"}},[t._v("\n            Request integrity check failed.  This request may be forged, proceed with caution.\n        ")]),t._v(" "),a("p",{staticClass:"subheading"},[t._v("\n            You have been asked to provide information about your identity.  Select the information you want to include in your response by checking the boxes.\n        ")]),t._v(" "),a("v-subheader",{staticClass:"pl-0 ml-0 mt-n4 caption"},[t._v("Requesting Passport Identity")]),t._v(" "),a("v-divider",{staticClass:"my-n1"}),t._v(" "),a("v-container",{staticClass:"mx-0 px-0 my-n2 py-0",attrs:{fluid:""}},[a("v-row",[a("v-col",{attrs:{cols:"auto"}},[t.requestingPassport.known?a("span",[a("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-decagram")]),t._v(" "+t._s(t.requestingPassport.name))],1):t._e(),t.requestingPassport.known?t._e():a("span",[a("v-icon",{attrs:{small:"",color:"warning"}},[t._v("mdi-alert")]),t._v(" Unknown Passport ("+t._s(t.requestingPassport.id)+")")],1)])],1)],1),t._v(" "),a("v-subheader",{staticClass:"pl-0 ml-0 mt-0 caption"},[t._v("Requested Claims")]),t._v(" "),a("v-divider",{staticClass:"my-n1"}),t._v(" "),t.requestedClaimTypes&&0!=t.requestedClaimTypes.length?t._e():a("v-container",{attrs:{fluid:""}},[t._v("\n            No Claims Requested\n        ")]),t._v(" "),t._l(t.requestedClaimTypes,function(e,s){return a("v-container",{key:e.id,attrs:{fluid:""}},[a("v-checkbox",{staticClass:"px-0 mt-0 mb-n8",attrs:{label:e.name,value:e.id,disabled:!e.claim},model:{value:t.selectedClaimTypes,callback:function(e){t.selectedClaimTypes=e},expression:"selectedClaimTypes"}})],1)}),t._v(" "),a("div",{staticClass:"mt-8 text-center"},[t.error?a("v-alert",{staticStyle:{"font-size":".9em"},attrs:{dense:"",outlined:"",type:"error"}},[t._v("\n                "+t._s(t.errorMessage)+"\n            ")]):t._e(),t._v(" "),a("div",[a("v-btn",{staticClass:"button-light",on:{click:t.sendClaims}},[t._v("\n                    Send Claims\n                ")]),t._v(" "),a("v-btn",{on:{click:t.cancel}},[t._v("\n                    Cancel\n                ")])],1)],1)],2),t._v(" "),t.loading||t.requestLoaded||t.requestSent?t._e():a("v-container",{attrs:{"justify-center":"","text-center":""}},[a("center",[a("img",{staticStyle:{width:"70%"},attrs:{src:s("IKFS")}}),t._v(" "),a("p",{staticStyle:{"text-align":"justify",width:"90%",margin:"20px 0px 30px 0px"}},[t._v("\n                Align your mobile device over the device making the request to capture the QR code.  Once scanned, you will be prompted to choose which information to present.\n            ")])]),t._v(" "),a("v-btn",{staticClass:"button-light",on:{click:t.scan}},[t._v("\n            Scan QR Code\n        ")]),t._v(" "),a("v-btn",{on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])],1),t._v(" "),!t.loading&&t.requestSent?a("v-container",[a("v-container",{staticClass:"my-4"},[a("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-decagram")]),t._v(" Identity Claim(s) Sent Successfully.\n        ")],1),t._v(" "),a("v-btn",{on:{click:t.cancel}},[t._v("\n            Done\n        ")])],1):t._e()],1)},staticRenderFns:[]},C=s("VU/8")(x,y,!1,null,null,null).exports,k={props:["qr"],data:function(){return{loading:!1,loadStatus:"Please Wait",passport:null}},methods:{init:function(){var t=this;setTimeout(c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.qr){e.next=14;break}return t.loading=!0,e.prev=2,e.next=5,BridgeProtocol.Services.RequestRelay.getRequest(t.qr);case 5:s=e.sent,t.passport=s.request,t.loading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0.message),t.loading=!1;case 14:case"end":return e.stop()}},e,this,[[2,10]])})),500)},scan:function(){location.href="index.html?s=true&t=passport"}},mounted:function(){var t=c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$nextTick(function(){this.init()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[a("v-overlay",{attrs:{value:t.loading}},[a("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[a("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1),t._v(" "),t.loading?t._e():a("v-container",{staticClass:"justify-center text-center"},[t.loading?t._e():a("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[a("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Import Bridge Passport")])]),t._v(" "),a("center",[a("img",{staticStyle:{width:"70%"},attrs:{src:s("O20d")}}),t._v(" "),a("p",{staticStyle:{"text-align":"justify",width:"70%",margin:"20px 0px 30px 0px"}},[t._v('\n                Open your Bridge Passport Browser Extension and click "Send to Mobile" to generate your handoff QR code.  Click below to scan the QR code and import your Bridge Identity.\n            ')])]),t._v(" "),a("v-btn",{staticClass:"button-light",on:{click:t.scan}},[t._v("Scan QR Code")])],1)],1)},staticRenderFns:[]},q=s("VU/8")(k,w,!1,null,null,null).exports,S={props:[],data:function(){return{loading:!0,passportContent:null,unlockPassword:null,unlockErrorMessage:null}},methods:{init:function(){var t=window.localStorage;this.passportContent=t.getItem("passport"),this.loading=!1},verifyUnlockPassword:function(){var t=c()(o.a.mark(function t(){var e,s,a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new BridgeProtocol.Models.Passport,s=!1,t.prev=2,t.next=5,e.open(this.passportContent,this.unlockPassword);case 5:s=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0.message);case 11:s?((a=window.localStorage).setItem("passport",this.passportContent),a.setItem("passphrase",this.unlockPassword),location.href="app.html"):this.unlockErrorMessage="Invalid password, try again.";case 12:case"end":return t.stop()}},t,this,[[2,8]])}));return function(){return t.apply(this,arguments)}}(),unload:function(){var t=window.localStorage;t.removeItem("passphrase"),t.removeItem("passport"),location.href="app.html"}},mounted:function(){this.$nextTick(function(){this.init()})}},P={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[s("v-overlay",{attrs:{value:t.loading}},[s("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),t._v(" "),t.loading?t._e():s("v-card",{attrs:{inverted:""}},[s("v-toolbar",{attrs:{color:"color-gradient",dark:""}},[s("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Unlock Passport")])],1),t._v(" "),s("v-card-text",[s("div",{staticClass:"caption text-justify mt-4"},[t._v("\n                To unlock your passport, please provide the password you provided when it was created.\n            ")]),t._v(" "),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{outlined:"",color:"secondary",label:"Password",type:"password",required:""},model:{value:t.unlockPassword,callback:function(e){t.unlockPassword=e},expression:"unlockPassword"}}),t._v(" "),s("div",[t._v(t._s(t.unlockErrorMessage)),s("p")])],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){return t.unload()}}},[t._v("Unload Passport")]),t._v(" "),s("v-btn",{attrs:{color:"accent"},on:{click:function(e){return t.verifyUnlockPassword()}}},[t._v("Unlock")])],1)],1)],1)},staticRenderFns:[]},R=s("VU/8")(S,P,!1,null,null,null).exports,I=s("mvHQ"),B=s.n(I),T={props:[],data:function(){return{loading:!1,loadStatus:"Please Wait",error:!1,errorMessage:"An error occurred",qr:null,dialog:!1,claims:[],token:null,response:null,lastSelectedClaim:""}},methods:{init:function(){var t=this;return c()(o.a.mark(function e(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},showQR:function(){var t=this;return c()(o.a.mark(function e(){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.claims.length){e.next=4;break}return t.error=!0,t.errorMessage="You must select at least one claim type.",e.abrupt("return");case 4:s=t,setTimeout(c()(o.a.mark(function t(){var e,a,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loading=!0,s.loadStatus="Generating Request Code",t.next=4,BridgeMobile.getPassportContext();case 4:return e=t.sent,s.token=BridgeMobile.createRandom(),t.next=8,BridgeMobile.createAuthRequest(e.passport,e.passphrase,s.token,s.claims);case 8:return a=t.sent,t.next=11,BridgeProtocol.Services.RequestRelay.createRequest(2,a);case 11:if((r=t.sent)||r.id){t.next=15;break}return s.loading=!1,t.abrupt("return");case 15:return t.next=17,QRCodeGenerator.create(r.id);case 17:return s.qr=t.sent,s.dialog=!0,s.loading=!1,t.next=22,BridgeMobile.waitGetAuthResponse(r.id);case 22:n=t.sent,s.dialog=!1,s.loading=!0,s.loadStatus="Response Received",setTimeout(c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loadStatus="Decrypting and Validating Response",t.next=3,BridgeMobile.getPassportContext();case 3:return e=t.sent,t.next=6,BridgeMobile.validateAuthResponse(e.passport,e.passphrase,s.token,n);case 6:return s.response=t.sent,t.next=9,BridgeMobile.getFullClaimsInfo(s.response.claims);case 9:s.claims=t.sent,console.log(B()(s.response)),s.loading=!1;case 12:case"end":return t.stop()}},t,this)})),1e3);case 27:case"end":return t.stop()}},t,this)})),500);case 6:case"end":return e.stop()}},e,t)}))()},closeQR:function(){this.qr=null,this.dialog=!1},cancel:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)},claimSelected:function(){var t=c()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.polling=!1,this.lastSelectedClaim==e.claimTypeId?this.lastSelectedClaim="":this.lastSelectedClaim=e.claimTypeId;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getDate:function(t){return BridgeMobile.getReadableDate(t)}},mounted:function(){this.$nextTick(function(){this.init()})}},M={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[s("v-app-bar",{staticClass:"text-center",attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Request Identification Claims")])]),t._v(" "),t.loading?s("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[s("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[s("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.loading||t.dialog||t.response?t._e():s("v-container",{staticStyle:{position:"absolute",top:"10px",left:"0px"},attrs:{"mx-2":""}},[s("p",{staticClass:"subheading text-justify"},[t._v("\n            Choose the identity claims you want to request.\n        ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2 caption"},[t._v("Anonymous Claim Types")]),t._v(" "),s("v-divider",{staticClass:"my-n1"}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Over 18",value:"100001",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Over 21",value:"100002",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Country",value:"100003",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{attrs:{label:"State / Province",value:"100004",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n1 caption"},[t._v("Private Claim Types")]),t._v(" "),s("v-divider",{staticClass:"my-n1"}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"First Name",value:"1",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Last Name",value:"2",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"E-mail Address",value:"3",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-6",attrs:{label:"Date of Birth",value:"4",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),t.error?s("v-alert",{staticStyle:{"font-size":".9em"},attrs:{dense:"",outlined:"",type:"error"}},[t._v("\n            "+t._s(t.errorMessage)+"\n        ")]):t._e(),t._v(" "),s("v-btn",{staticClass:"button-light mr-1",on:{click:t.showQR}},[t._v("\n            Request Claims\n        ")]),t._v(" "),s("v-btn",{on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])],1),t._v(" "),t.loading||t.dialog||!t.response?t._e():s("v-container",{staticStyle:{position:"absolute",top:"0px",left:"0px"}},[s("v-expansion-panels",[0==t.claims.length?s("v-alert",{staticClass:"caption text-left mt-2",attrs:{border:"left","colored-border":"",type:"info",elevation:"2"}},[t._v("\n                No digital identity verified claims found.  To add verified claims, use the Bridge Passport Browser Extension and re-import your passport with the added claims.\n            ")]):t._e(),t._v(" "),t._l(t.claims,function(e,a){return s("v-expansion-panel",{key:e.id,staticClass:"mb-1 ml-0 px-0 py-0",on:{click:function(s){return t.claimSelected(e)}}},[s("v-expansion-panel-header",{staticClass:"py-0"},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[s("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[s("div",{staticClass:"mb-1 title-2",domProps:{textContent:t._s(e.claimTypeName)}}),t._v(" "),s("div",{staticClass:"caption",domProps:{textContent:t._s(e.claimValue)}})]),t._v(" "),s("v-row")],1)],1),t._v(" "),s("v-expansion-panel-content",{staticClass:"py-0"},[s("v-container",{attrs:{fluid:""}},[s("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("\n                            Claim Details \n                        ")]),t._v(" "),s("v-divider",{staticClass:"mb-2"}),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Verified:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.verifiedOn))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Expires: ")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.expireDate))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Issuer:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.signedByName))])],1)],1)],1)],1)})],2),t._v(" "),s("v-btn",{staticClass:"button-light mt-4",on:{click:t.cancel}},[t._v("\n            Done\n        ")])],1),t._v(" "),s("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",{attrs:{"fill-height":"","justify-center":"",dark:""}},[s("v-toolbar",{attrs:{color:"color-gradient",dark:""}},[s("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Claims Request Code")])],1),t._v(" "),s("v-card-text",[s("p",{staticClass:"mt-3"},[t._v("Scan this QR Code with the target Bridge Mobile Passport App to request identification claims.")]),t._v(" "),s("center",[s("div",{staticStyle:{"background-color":"white",height:"260px",width:"260px","padding-top":"5px"}},[null!=t.qr?s("img",{attrs:{src:t.qr}}):t._e()])]),t._v(" "),s("div",{staticClass:"text-center m-6"},[s("v-progress-circular",{staticClass:"my-4",attrs:{size:25,color:"primary",indeterminate:""}}),t._v(" "),s("br"),t._v("\n             Waiting for response...\n             "),s("br"),s("br"),t._v(" "),s("v-btn",{staticStyle:{width:"70%"},on:{click:t.closeQR}},[t._v("\n            Cancel\n            ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},$=s("VU/8")(T,M,!1,null,null,null).exports,D={name:"passport-details",components:{},data:function(){return{loadStatus:"Loading Bridge Identity",mainContainerHeight:690,passportId:"",passportDetailSelected:!1,passportNeoLoading:!1,passportEthLoading:!1,passportNeoPending:!1,passportEthPending:!1,passportNeoPublished:!1,passportEthPublished:!1,version:null,publicKey:"",lastSelectedClaim:"",neoWallet:null,ethWallet:null,neoWait:!1,ethWait:!1,refreshing:!0,claims:[],publishClaim:null,publishDialog:!1,publishClaimDialog:!1,polling:!1,neoPublishing:!1}},methods:{init:function(){var t=c()(o.a.mark(function t(){var e;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,setTimeout(c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.refreshing=!0,e.passportId="",e.publicKey="",t.next=5,BridgeMobile.getPassportContext();case 5:return e.passportContext=t.sent,e.passportId=e.passportContext.passport.id,e.publicKey=e.passportContext.passport.publicKey,e.version=BridgeMobile.passportVersion(),e.neoWallet=e.passportContext.passport.getWalletForNetwork("neo"),e.ethWallet=e.passportContext.passport.getWalletForNetwork("eth"),t.next=13,e.refreshClaims();case 13:e.mainContainerHeight=e.$refs.mainContainer.clientHeight;case 14:case"end":return t.stop()}},t,this)})),500);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refreshClaims:function(){var t=c()(o.a.mark(function t(){var e,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.refreshing=!0,this.loadStatus="Decrypting Identity Claims",this.claims=[],t.next=5,BridgeMobile.getPassportContext();case 5:return e=t.sent,t.next=8,e.passport.getDecryptedClaims(null,e.passphrase);case 8:return s=t.sent,t.next=11,BridgeMobile.getFullClaimsInfo(s);case 11:this.claims=t.sent,this.refreshing=!1;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),passportDetail:function(){var t=c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.polling=!1,this.passportDetailSelected=!this.passportDetailSelected,!this.passportDetailSelected){t.next=5;break}return t.next=5,this.refreshPassportDetail();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),claimSelected:function(){var t=c()(o.a.mark(function t(e){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.polling=!1,this.lastSelectedClaim==e.claimTypeId?this.lastSelectedClaim="":this.lastSelectedClaim=e.claimTypeId;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getDate:function(t){return BridgeMobile.getReadableDate(t)},openUrl:function(t){window.open(t)}},mounted:function(){var t=c()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$nextTick(function(){this.init()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{ref:"mainContainer",staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-start":"","text-center":""}},[t.refreshing?s("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[s("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[s("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.refreshing?t._e():s("v-container",{staticStyle:{position:"relative",top:"10px",left:"0px"},attrs:{"px-0":"","py-0":"","mx-0":"","my-0":""}},[s("v-expansion-panels",[s("v-expansion-panel",{on:{click:t.passportDetail}},[s("v-expansion-panel-header",{staticClass:"left-border-color-primary pt-1 pb-1"},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[s("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),s("v-col",{attrs:{cols:"8"}},[s("div",{staticClass:"mb-1 title-2"},[t._v("Id")]),t._v(" "),s("div",{staticClass:"caption",staticStyle:{"word-break":"break-all"},domProps:{textContent:t._s(t.passportId)}})]),t._v(" "),s("v-row")],1)],1),t._v(" "),s("v-expansion-panel-content",{staticClass:"left-border-color-primary"},[s("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("Passport Details")]),t._v(" "),s("v-divider",{staticClass:"mb-2"}),t._v(" "),s("v-row",{staticClass:"mb-n4"},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Version:")]),t._v(" "),s("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[t._v(t._s(t.version))])],1),t._v(" "),s("v-row",{staticClass:"mb-n4"},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Id:")]),t._v(" "),s("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[t._v(t._s(t.passportId))])],1)],1)],1),t._v(" "),0==t.claims.length?s("v-alert",{staticClass:"caption text-left mt-2",attrs:{border:"left","colored-border":"",type:"info",elevation:"2"}},[t._v("\n                No digital identity verified claims found.  To add verified claims, use the Bridge Passport Browser Extension and re-import your passport with the added claims.\n            ")]):t._e(),t._v(" "),t._l(t.claims,function(e,a){return s("v-expansion-panel",{key:e.id,on:{click:function(s){return t.claimSelected(e)}}},[s("v-expansion-panel-header",{staticClass:"left-border-color-primary pt-1 pb-1"},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[s("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[s("div",{staticClass:"mb-1 title-2",domProps:{textContent:t._s(e.claimTypeName)}}),t._v(" "),s("div",{staticClass:"caption",domProps:{textContent:t._s(e.claimValue)}})]),t._v(" "),s("v-row")],1)],1),t._v(" "),s("v-expansion-panel-content",{staticClass:"left-border-color-primary"},[s("v-container",{attrs:{fluid:""}},[s("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("\n                            Claim Details \n                        ")]),t._v(" "),s("v-divider",{staticClass:"mb-2"}),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Verified:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.verifiedOn))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Expires:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.expireDate))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Issuer:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.signedByName))])],1)],1)],1)],1)})],2)],1)],1)},staticRenderFns:[]},N=s("VU/8")(D,U,!1,null,null,null).exports;a.default.use(v.a);var A=new v.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:f},{path:"/about",component:b},{path:"/scan",component:C,props:function(t){return{qr:t.query.qr}}},{path:"/open",component:q},{path:"/unlock",component:R},{path:"/request",component:$},{path:"/identity",component:N,props:function(t){return{qr:t.query.qr}}}]});a.default.config.productionTip=!1,a.default.use(n.a),new a.default({el:"#app",vuetify:new n.a({theme:{themes:{dark:{primary:"#904099",secondary:"#6155a3",accent:"#3c7fc6",info:"#6155a3",error:"#b71c1c"}}}}),router:A,components:{App:d},template:"<App/>"})},O20d:function(t,e,s){t.exports=s.p+"static/img/scan-qr-icon.819b641.png"},ibFO:function(t,e,s){t.exports=s.p+"static/img/bridge-passport.7b3b5a6.png"}},["NHnr"]);
//# sourceMappingURL=app.5cf6b6d8956c54df2cc0.js.map