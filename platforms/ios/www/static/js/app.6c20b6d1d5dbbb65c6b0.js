webpackJsonp([1],{IKFS:function(t,e,r){t.exports=r.p+"static/img/scan-qr2-icon.5e0cb23.png"},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Xxa5"),n=r.n(s),a=r("exGp"),i=r.n(a),o=r("7+uW"),c=r("3EgV"),l=r.n(c),u={name:"bridge-passport-app",data:function(){return{name:"App",qr:null,loading:!0,passport:null,passportLoaded:!1,passportUnlocked:!1}},methods:{openUrl:function(t){window.open(t)},init:function(){var t=i()(n.a.mark(function t(){var e,r,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=window.localStorage,r=e.getItem("passport"),s=e.getItem("passphrase"),this.passportLoaded=null!=r,this.passportUnlocked=null!=s,this.passportLoaded?this.passportLoaded&&!this.passportUnlocked&&this.navigate("/unlock"):this.navigate("/open"),this.loading=!1;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),unload:function(){var t=window.localStorage;t.removeItem("passphrase"),t.removeItem("passport"),this.navigate("/")},lock:function(){window.localStorage.removeItem("passphrase"),this.navigate("/")},navigate:function(t,e){this.$router.push({path:t,query:e}),this.$router.go(1)}},created:function(){this.$vuetify.theme.dark=!0,this.$vuetify.theme.primary="#673ab7"},mounted:function(){this.$nextTick(function(){this.init()})}},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"bridge-passport"}},[t.passportLoaded&&t.passportUnlocked?r("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[r("v-tabs",{attrs:{dark:""}},[r("v-tab",[r("router-link",{staticClass:"router-link",attrs:{to:"/identity"}},[t._v("Identity")])],1),t._v(" "),r("v-tab",[r("router-link",{staticClass:"router-link",attrs:{to:"/scan"}},[t._v("Scan")])],1),t._v(" "),r("v-tab",[r("router-link",{staticClass:"router-link",attrs:{to:"/request"}},[t._v("Request")])],1)],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-menu",{attrs:{"close-on-click":"","offset-y":"",small:"",dark:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[r("v-btn",t._g({attrs:{icon:""}},s),[r("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-dots-vertical")])],1)]}}],null,!1,2291122027)},[t._v(" "),r("v-list",{attrs:{dense:""}},[r("v-subheader",{attrs:{inset:""}},[t._v("Passport Options")]),t._v(" "),r("v-divider",{attrs:{inset:""}}),t._v(" "),r("v-list-item",{attrs:{"two-line":""},on:{click:t.lock}},[r("v-list-item-icon",[r("v-icon",[t._v("mdi-lock")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("Lock Passport")]),t._v(" "),r("v-list-item-subtitle",[t._v("\n                Clear your passphrase but keep the passport json cached for future use\n            ")])],1)],1),t._v(" "),r("v-list-item",{attrs:{"two-line":""},on:{click:t.unload}},[r("v-list-item-icon",[r("v-icon",[t._v("mdi-close")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("Unload Passport")]),t._v(" "),r("v-list-item-subtitle",[t._v("\n                Clear your passphrase and clear the cached the passport json\n            ")])],1)],1),t._v(" "),r("v-divider",{attrs:{inset:""}}),t._v(" "),r("router-link",{staticClass:"router-link",attrs:{to:"/about"}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",[t._v("mdi-information")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("About Bridge Passport")])],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),r("v-main",[r("v-container",{staticClass:"fill-height justify-center text-center inverted",attrs:{fluid:""}},[r("v-overlay",{attrs:{value:t.loading}},[r("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),t._v(" "),r("router-view")],1)],1)],1)},staticRenderFns:[]},d=r("VU/8")(u,p,!1,null,null,null).exports,v=r("/ocq"),m={data:function(){return{passportId:null}},methods:{init:function(){var t=i()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$BridgeMobile.getPassportContext();case 2:(e=t.sent).passport&&(this.passportId=e.passport.id);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.$nextTick(function(){this.init()})}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{"fill-height":"","justify-center":""}},[e("div",[e("img",{attrs:{src:r("ibFO")}}),this._v(" "),e("div",{staticClass:"mt-2"},[this._v("\n            "+this._s(this.passportId)+"\n        ")])])])},staticRenderFns:[]},f=r("VU/8")(m,h,!1,null,null,null).exports,g={data:function(){return{visible:!0,currentYear:(new Date).getFullYear(),version:"1.0.0"}},methods:{openUrl:function(t){window.open(t)},close:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)}}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[r("v-app-bar",{staticClass:"text-center",attrs:{app:"","clipped-left":"",color:"color-gradient"}},[r("h3",[t._v("About Bridge Passport Mobile")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-icon",{on:{click:t.close}},[t._v("mdi-close")])],1),t._v(" "),r("v-card",{staticStyle:{position:"absolute",top:"60px"}},[r("v-card-text",{staticClass:"inverted text-left"},[r("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Version Info")]),t._v(" "),r("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),r("p",[t._v("\n                "+t._s(t.version)+"\n            ")]),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("License")]),t._v(" "),r("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),r("p",[t._v('\n                This software is licensed under the Apache 2.0 License and is being provided to you on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  Bridge Protocol Corporation will not be held liable for any loss or damages resulting from the use of this software.  If you do not agree with these terms, you must stop using this software immediately.  Please review the '),r("a",{on:{click:function(e){return t.openUrl("https://bridge-protocol.github.io/docs/license")}}},[t._v("Bridge Network terms of service")]),t._v(" and "),r("a",{on:{click:function(e){return t.openUrl("https://bridge-protocol.github.io/docs/tos")}}},[t._v("open source license")]),t._v(" before using this software.\n            ")]),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Limitation of Liability")]),t._v(" "),r("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),r("p",[t._v("\n                It is your responsibility to ensure that you backup your passport and associated blockchain wallet private keys.  Bridge Protocol Corporation will not be held responsible for loss of funds, verified claims data, or any other damages resulting from the use of this software.\n            ")]),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Assignment of Copyright")]),t._v(" "),r("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),r("p",[t._v('\n                This software, "Bridge" Logo, and any other related content are Copyright Â©2018-'),r("span",[t._v(t._s(t.currentYear))]),t._v(" Bridge Protocol Corporation, All Rights Reserved.  Some portions of this software and logos are copyright to their respective owners.\n            ")]),t._v(" "),r("div",{staticClass:"text-center"},[r("v-btn",{on:{click:t.close}},[t._v("\n                    Close\n                ")])],1)],1)],1)],1)},staticRenderFns:[]},b=r("VU/8")(g,_,!1,null,null,null).exports,x={props:["qr"],data:function(){return{qrcode:null,id:null,loading:!1,loadStatus:"Please Wait",requestLoaded:!1,requestMessage:null,messageValid:!1,requestingPassport:null,requestedClaimTypes:[],selectedClaimTypes:[],requestSent:!1,error:!1,errorMessage:"An error occurred"}},methods:{init:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},scan:function(){var t=this;this.loading=!0,setTimeout(i()(n.a.mark(function e(){var r,s,a,i,o,c,l;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $("#app_wrapper").hide(),$(".scan-qr-overlay").show(),e.next=4,t.$QrCodeScanner.scan();case 4:if(r=e.sent,t.$QrCodeScanner.cancel(),$("#app_wrapper").show(),$(".scan-qr-overlay").hide(),null!=r&&"undefined"!=r&&0!=r.length){e.next=11;break}return t.loading=!1,e.abrupt("return");case 11:return t.loading=!0,t.loadStatus="Decrypting and Validating Request",t.id=t.qr,e.next=16,t.$BridgeProtocol.Services.RequestRelay.getRequest(t.id);case 16:return s=e.sent,e.next=19,t.$BridgeMobile.validateAuthRequest(s.request);case 19:return t.requestMessage=e.sent,t.messageValid=t.requestMessage.signatureValid,e.next=23,t.$BridgeMobile.getPassportContext();case 23:return a=e.sent,e.next=26,t.$BridgeMobile.getPassportDetails(a.passport,a.passphrase,t.requestMessage.passportId);case 26:return(i=e.sent).name=i.id,i.known=!1,i.partnerName&&i.partnerName.length>0&&(i.name=i.partnerName,i.known=!0),t.requestingPassport=i,e.next=33,t.$BridgeMobile.getClaimTypes(t.requestMessage.payload.claimTypes);case 33:if(o=e.sent)for(c=0;c<o.length;c++)l=a.passport.getClaimPackage(o[c].id),o[c].claim=null!=l;t.requestedClaimTypes=o,t.requestLoaded=!0,t.loading=!1;case 38:case"end":return e.stop()}},e,this)})),500)},sendClaims:function(){var t=this;return i()(n.a.mark(function e(){var r,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.selectedClaimTypes.length){e.next=4;break}return t.error=!0,t.errorMessage="You must select at least one claim type.",e.abrupt("return");case 4:return t.loading=!0,t.loadStatus="Encrypting Claims",e.next=8,app.$BridgeMobile.getPassportContext();case 8:return r=e.sent,e.next=11,app.$BridgeMobile.createAuthResponse(r.passport,r.passphrase,t.requestMessage,t.selectedClaimTypes);case 11:return s=e.sent,t.loadStatus="Sending Response",e.next=15,app.$BridgeProtocol.Services.RequestRelay.createResponse(t.id,s);case 15:e.sent,t.requestSent=!0,t.loading=!1;case 18:case"end":return e.stop()}},e,t)}))()},cancel:function(){this.$router.push({path:"/",query:{}}),this.$router.go(1)}},mounted:function(){this.$nextTick(i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:case"end":return t.stop()}},t,this)})))}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"justify-center":"",dark:""}},[s("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Identification Claims Request")])]),t._v(" "),t.loading?s("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[s("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[s("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.loading||!t.requestLoaded||t.requestSent?t._e():s("v-container",{staticStyle:{position:"absolute",top:"10px",left:"0px"},attrs:{"align-top":"","justify-center":"","mt-0":"","pt-0":"","mx-2":"","text-left":""}},[t.messageValid?t._e():s("v-alert",{staticClass:"text-left caption text-wrap mx-n6 mt-n4",attrs:{border:"left","colored-border":"",type:"warning",elevation:"0"}},[t._v("\n            Request integrity check failed.  This request may be forged, proceed with caution.\n        ")]),t._v(" "),s("p",{staticClass:"subheading"},[t._v("\n            You have been asked to provide information about your identity.  Select the information you want to include in your response by checking the boxes.\n        ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n4 caption"},[t._v("Requesting Passport Identity")]),t._v(" "),s("v-divider",{staticClass:"my-n1"}),t._v(" "),s("v-container",{staticClass:"mx-0 px-0 my-n2 py-0",attrs:{fluid:""}},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[t.requestingPassport.known?s("span",[s("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-decagram")]),t._v(" "+t._s(t.requestingPassport.name))],1):t._e(),t.requestingPassport.known?t._e():s("span",[s("v-icon",{attrs:{small:"",color:"warning"}},[t._v("mdi-alert")]),t._v(" Unknown Passport ("+t._s(t.requestingPassport.id)+")")],1)])],1)],1),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-0 caption"},[t._v("Requested Claims")]),t._v(" "),s("v-divider",{staticClass:"my-n1"}),t._v(" "),t.requestedClaimTypes&&0!=t.requestedClaimTypes.length?t._e():s("v-container",{attrs:{fluid:""}},[t._v("\n            No Claims Requested\n        ")]),t._v(" "),t._l(t.requestedClaimTypes,function(e,r){return s("v-container",{key:e.id,attrs:{fluid:""}},[s("v-checkbox",{staticClass:"px-0 mt-0 mb-n8",attrs:{label:e.name,value:e.id,disabled:!e.claim},model:{value:t.selectedClaimTypes,callback:function(e){t.selectedClaimTypes=e},expression:"selectedClaimTypes"}})],1)}),t._v(" "),s("div",{staticClass:"mt-8 text-center"},[t.error?s("v-alert",{staticStyle:{"font-size":".9em"},attrs:{dense:"",outlined:"",type:"error"}},[t._v("\n                "+t._s(t.errorMessage)+"\n            ")]):t._e(),t._v(" "),s("div",[s("v-btn",{staticClass:"button-light",on:{click:t.sendClaims}},[t._v("\n                    Send Claims\n                ")]),t._v(" "),s("v-btn",{on:{click:t.cancel}},[t._v("\n                    Cancel\n                ")])],1)],1)],2),t._v(" "),t.loading||t.requestLoaded||t.requestSent?t._e():s("v-container",{attrs:{"justify-center":"","text-center":""}},[s("center",[s("img",{staticStyle:{width:"70%"},attrs:{src:r("IKFS")}}),t._v(" "),s("p",{staticStyle:{"text-align":"justify",width:"90%",margin:"20px 0px 30px 0px"}},[t._v("\n                Align your mobile device over the device making the request to capture the QR code.  Once scanned, you will be prompted to choose which information to present.\n            ")])]),t._v(" "),s("v-btn",{staticClass:"button-light",on:{click:t.scan}},[t._v("\n            Scan QR Code\n        ")]),t._v(" "),s("v-btn",{on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])],1),t._v(" "),!t.loading&&t.requestSent?s("v-container",[s("v-container",{staticClass:"my-4"},[s("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-decagram")]),t._v(" Identity Claim(s) Sent Successfully.\n        ")],1),t._v(" "),s("v-btn",{on:{click:t.cancel}},[t._v("\n            Done\n        ")])],1):t._e()],1)},staticRenderFns:[]},y=r("VU/8")(x,w,!1,null,null,null).exports,C={props:["qr"],data:function(){return{loading:!1,loadStatus:"Please Wait",passport:null}},methods:{init:function(){var t=this;setTimeout(i()(n.a.mark(function e(){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.qr){e.next=14;break}return t.loading=!0,e.prev=2,e.next=5,t.$BridgeProtocol.Services.RequestRelay.getRequest(t.qr);case 5:r=e.sent,t.passport=r.request,t.loading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0.message),t.loading=!1;case 14:case"end":return e.stop()}},e,this,[[2,10]])})),500)},scan:function(){var t=this;return i()(n.a.mark(function e(){var r,s,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return alert("scan"),$("#app_wrapper").hide(),$(".scan-qr-overlay").show(),e.next=5,t.$QrCodeScanner.scan();case 5:return r=e.sent,t.$QrCodeScanner.cancel(),$("#app_wrapper").show(),$(".scan-qr-overlay").hide(),e.next=11,t.$BridgeProtocol.Services.RequestRelay.getRequest(r);case 11:if(!(s=e.sent)||!s.request){e.next=19;break}return a=window.localStorage,e.next=16,a.setItem("passport",s.request);case 16:t.$router.push({path:"/unlock"}),e.next=20;break;case 19:t.$router.push({path:"/open",query:{}});case 20:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$nextTick(function(){this.init()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{id:"container","fill-height":"","justify-center":"",dark:""}},[s("v-overlay",{attrs:{value:t.loading}},[s("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[s("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1),t._v(" "),t.loading?t._e():s("v-container",{staticClass:"justify-center text-center"},[t.loading?t._e():s("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Import Bridge Passport")])]),t._v(" "),s("center",[s("img",{staticStyle:{width:"70%"},attrs:{src:r("O20d")}}),t._v(" "),s("p",{staticStyle:{"text-align":"justify",width:"70%",margin:"20px 0px 30px 0px"}},[t._v('\n                Open your Bridge Passport Browser Extension and click "Send to Mobile" to generate your handoff QR code.  Click below to scan the QR code and import your Bridge Identity.\n            ')])]),t._v(" "),s("v-btn",{staticClass:"button-light",on:{click:t.scan}},[t._v("Scan QR Code")])],1)],1)},staticRenderFns:[]},S=r("VU/8")(C,k,!1,null,null,null).exports,P={props:[],data:function(){return{loading:!0,passportContent:null,unlockPassword:null,unlockErrorMessage:null}},methods:{init:function(){var t=window.localStorage;this.passportContent=t.getItem("passport"),this.loading=!1},verifyUnlockPassword:function(){var t=i()(n.a.mark(function t(){var e,r,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new this.$BridgeProtocol.Models.Passport,r=!1,t.prev=2,t.next=5,e.open(this.passportContent,this.unlockPassword);case 5:r=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0.message);case 11:r?((s=window.localStorage).setItem("passport",this.passportContent),s.setItem("passphrase",this.unlockPassword),location.href="index.html"):this.unlockErrorMessage="Invalid password, try again.";case 12:case"end":return t.stop()}},t,this,[[2,8]])}));return function(){return t.apply(this,arguments)}}(),unload:function(){var t=window.localStorage;t.removeItem("passphrase"),t.removeItem("passport"),location.href="index.html"}},mounted:function(){this.$nextTick(function(){this.init()})}},q={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[r("v-overlay",{attrs:{value:t.loading}},[r("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),t._v(" "),t.loading?t._e():r("v-card",{attrs:{inverted:""}},[r("v-toolbar",{attrs:{color:"color-gradient",dark:""}},[r("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Unlock Passport")])],1),t._v(" "),r("v-card-text",[r("div",{staticClass:"caption text-justify mt-4 mb-2"},[t._v("\n                To unlock your passport, please provide the password you provided when it was created.\n            ")]),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{outlined:"",color:"secondary",label:"Password",type:"password",required:""},model:{value:t.unlockPassword,callback:function(e){t.unlockPassword=e},expression:"unlockPassword"}}),t._v(" "),r("div",[t._v(t._s(t.unlockErrorMessage)),r("p")])],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(e){return t.unload()}}},[t._v("Unload Passport")]),t._v(" "),r("v-btn",{attrs:{color:"button-light"},on:{click:function(e){return t.verifyUnlockPassword()}}},[t._v("Unlock")])],1)],1)],1)},staticRenderFns:[]},R=r("VU/8")(P,q,!1,null,null,null).exports,B=r("mvHQ"),I=r.n(B),T={props:[],data:function(){return{loading:!1,loadStatus:"Please Wait",error:!1,errorMessage:"An error occurred",qr:null,dialog:!1,claims:[],token:null,response:null,lastSelectedClaim:""}},methods:{init:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},showQR:function(){var t=this;return i()(n.a.mark(function e(){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.claims.length){e.next=4;break}return t.error=!0,t.errorMessage="You must select at least one claim type.",e.abrupt("return");case 4:r=t,setTimeout(i()(n.a.mark(function t(){var e,s,a,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.loading=!0,r.loadStatus="Generating Request Code",t.next=4,r.$BridgeMobile.getPassportContext();case 4:return e=t.sent,r.token=r.$BridgeMobile.createRandom(),t.next=8,r.$BridgeMobile.createAuthRequest(e.passport,e.passphrase,r.token,r.claims);case 8:return s=t.sent,t.next=11,r.$BridgeProtocol.Services.RequestRelay.createRequest(2,s);case 11:if((a=t.sent)||a.id){t.next=15;break}return r.loading=!1,t.abrupt("return");case 15:return t.next=17,r.$QrCodeGenerator.create(a.id);case 17:return r.qr=t.sent,r.dialog=!0,r.loading=!1,t.next=22,r.$BridgeMobile.waitGetAuthResponse(a.id);case 22:o=t.sent,r.dialog=!1,r.loading=!0,r.loadStatus="Response Received",setTimeout(i()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.loadStatus="Decrypting and Validating Response",t.next=3,r.$BridgeMobile.getPassportContext();case 3:return e=t.sent,t.next=6,r.$BridgeMobile.validateAuthResponse(e.passport,e.passphrase,r.token,o);case 6:return r.response=t.sent,t.next=9,r.$BridgeMobile.getFullClaimsInfo(r.response.claims);case 9:r.claims=t.sent,console.log(I()(r.response)),r.loading=!1;case 12:case"end":return t.stop()}},t,this)})),1e3);case 27:case"end":return t.stop()}},t,this)})),500);case 6:case"end":return e.stop()}},e,t)}))()},closeQR:function(){this.qr=null,this.dialog=!1},cancel:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)},claimSelected:function(){var t=i()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.polling=!1,this.lastSelectedClaim==e.claimTypeId?this.lastSelectedClaim="":this.lastSelectedClaim=e.claimTypeId;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getDate:function(t){return app.$BridgeMobile.getReadableDate(t)}},mounted:function(){this.$nextTick(function(){this.init()})}},M={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[r("v-app-bar",{staticClass:"text-center",attrs:{app:"","clipped-left":"",color:"color-gradient"}},[r("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Request Identification Claims")])]),t._v(" "),t.loading?r("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[r("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[r("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.loading||t.dialog||t.response?t._e():r("v-container",{staticStyle:{position:"absolute",top:"10px",left:"0px"},attrs:{"mx-2":""}},[r("p",{staticClass:"subheading text-justify"},[t._v("\n            Choose the identity claims you want to request.\n        ")]),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-n2 caption"},[t._v("Anonymous Claim Types")]),t._v(" "),r("v-divider",{staticClass:"my-n1"}),t._v(" "),r("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Over 18",value:"100001",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Over 21",value:"100002",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Country",value:"100003",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-checkbox",{attrs:{label:"State / Province",value:"100004",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-n1 caption"},[t._v("Private Claim Types")]),t._v(" "),r("v-divider",{staticClass:"my-n1"}),t._v(" "),r("v-checkbox",{staticClass:"mb-n6",attrs:{label:"First Name",value:"1",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Last Name",value:"2",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-checkbox",{staticClass:"mb-n6",attrs:{label:"E-mail Address",value:"3",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),r("v-checkbox",{staticClass:"mb-6",attrs:{label:"Date of Birth",value:"4",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),t.error?r("v-alert",{staticStyle:{"font-size":".9em"},attrs:{dense:"",outlined:"",type:"error"}},[t._v("\n            "+t._s(t.errorMessage)+"\n        ")]):t._e(),t._v(" "),r("v-btn",{staticClass:"button-light mr-1",on:{click:t.showQR}},[t._v("\n            Request Claims\n        ")]),t._v(" "),r("v-btn",{on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])],1),t._v(" "),t.loading||t.dialog||!t.response?t._e():r("v-container",{staticStyle:{position:"absolute",top:"0px",left:"0px"}},[r("v-expansion-panels",[0==t.claims.length?r("v-alert",{staticClass:"caption text-left mt-2",attrs:{border:"left","colored-border":"",type:"info",elevation:"2"}},[t._v("\n                No digital identity verified claims found.  To add verified claims, use the Bridge Passport Browser Extension and re-import your passport with the added claims.\n            ")]):t._e(),t._v(" "),t._l(t.claims,function(e,s){return r("v-expansion-panel",{key:e.id,staticClass:"mb-1 ml-0 px-0 py-0",on:{click:function(r){return t.claimSelected(e)}}},[r("v-expansion-panel-header",{staticClass:"py-0"},[r("v-row",[r("v-col",{attrs:{cols:"auto"}},[r("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[r("div",{staticClass:"mb-1 title-2",domProps:{textContent:t._s(e.claimTypeName)}}),t._v(" "),r("div",{staticClass:"caption",domProps:{textContent:t._s(e.claimValue)}})]),t._v(" "),r("v-row")],1)],1),t._v(" "),r("v-expansion-panel-content",{staticClass:"py-0"},[r("v-container",{attrs:{fluid:""}},[r("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("\n                            Claim Details \n                        ")]),t._v(" "),r("v-divider",{staticClass:"mb-2"}),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Verified:")]),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.verifiedOn))])],1),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Expires: ")]),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.expireDate))])],1),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Issuer:")]),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.signedByName))])],1)],1)],1)],1)})],2),t._v(" "),r("v-btn",{staticClass:"button-light mt-4",on:{click:t.cancel}},[t._v("\n            Done\n        ")])],1),t._v(" "),r("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",{attrs:{"fill-height":"","justify-center":"",dark:""}},[r("v-toolbar",{attrs:{color:"color-gradient",dark:""}},[r("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Claims Request Code")])],1),t._v(" "),r("v-card-text",[r("p",{staticClass:"mt-3"},[t._v("Scan this QR Code with the target Bridge Mobile Passport App to request identification claims.")]),t._v(" "),r("center",[r("div",{staticStyle:{"background-color":"white",height:"260px",width:"260px","padding-top":"5px"}},[null!=t.qr?r("img",{attrs:{src:t.qr}}):t._e()])]),t._v(" "),r("div",{staticClass:"text-center m-6"},[r("v-progress-circular",{staticClass:"my-4",attrs:{size:25,color:"primary",indeterminate:""}}),t._v(" "),r("br"),t._v("\n             Waiting for response...\n             "),r("br"),r("br"),t._v(" "),r("v-btn",{staticStyle:{width:"70%"},on:{click:t.closeQR}},[t._v("\n            Cancel\n            ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},D=r("VU/8")(T,M,!1,null,null,null).exports,A={name:"passport-details",components:{},data:function(){return{loadStatus:"Loading Bridge Identity",mainContainerHeight:690,passportId:"",passportDetailSelected:!1,passportNeoLoading:!1,passportEthLoading:!1,passportNeoPending:!1,passportEthPending:!1,passportNeoPublished:!1,passportEthPublished:!1,version:null,publicKey:"",lastSelectedClaim:"",neoWallet:null,ethWallet:null,neoWait:!1,ethWait:!1,refreshing:!0,claims:[],publishClaim:null,publishDialog:!1,publishClaimDialog:!1,polling:!1,neoPublishing:!1}},methods:{init:function(){var t=i()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,setTimeout(i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.refreshing=!0,e.passportId="",e.publicKey="",t.next=5,e.$BridgeMobile.getPassportContext();case 5:return e.passportContext=t.sent,e.passportId=e.passportContext.passport.id,e.publicKey=e.passportContext.passport.publicKey,e.version=e.$BridgeMobile.passportVersion(),e.neoWallet=e.passportContext.passport.getWalletForNetwork("neo"),e.ethWallet=e.passportContext.passport.getWalletForNetwork("eth"),t.next=13,e.refreshClaims();case 13:e.mainContainerHeight=e.$refs.mainContainer.clientHeight;case 14:case"end":return t.stop()}},t,this)})),500);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refreshClaims:function(){var t=i()(n.a.mark(function t(){var e,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.refreshing=!0,this.loadStatus="Decrypting Identity Claims",this.claims=[],t.next=5,this.$BridgeMobile.getPassportContext();case 5:return e=t.sent,t.next=8,e.passport.getDecryptedClaims(null,e.passphrase);case 8:return r=t.sent,t.next=11,this.$BridgeMobile.getFullClaimsInfo(r);case 11:this.claims=t.sent,this.refreshing=!1;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),passportDetail:function(){var t=i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.polling=!1,this.passportDetailSelected=!this.passportDetailSelected,!this.passportDetailSelected){t.next=5;break}return t.next=5,this.refreshPassportDetail();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),claimSelected:function(){var t=i()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.polling=!1,this.lastSelectedClaim==e.claimTypeId?this.lastSelectedClaim="":this.lastSelectedClaim=e.claimTypeId;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getDate:function(t){return this.$BridgeMobile.getReadableDate(t)},openUrl:function(t){window.open(t)}},mounted:function(){var t=i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$nextTick(function(){this.init()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},L={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{ref:"mainContainer",staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-start":"","text-center":""}},[t.refreshing?r("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[r("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[r("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.refreshing?t._e():r("v-container",{staticStyle:{position:"relative",top:"10px",left:"0px"},attrs:{"px-0":"","py-0":"","mx-0":"","my-0":""}},[r("v-expansion-panels",[r("v-expansion-panel",{on:{click:t.passportDetail}},[r("v-expansion-panel-header",{staticClass:"left-border-color-primary pt-1 pb-1"},[r("v-row",[r("v-col",{attrs:{cols:"auto"}},[r("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),r("v-col",{attrs:{cols:"8"}},[r("div",{staticClass:"mb-1 title-2"},[t._v("Id")]),t._v(" "),r("div",{staticClass:"caption",staticStyle:{"word-break":"break-all"},domProps:{textContent:t._s(t.passportId)}})]),t._v(" "),r("v-row")],1)],1),t._v(" "),r("v-expansion-panel-content",{staticClass:"left-border-color-primary"},[r("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("Passport Details")]),t._v(" "),r("v-divider",{staticClass:"mb-2"}),t._v(" "),r("v-row",{staticClass:"mb-n4"},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Version:")]),t._v(" "),r("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[t._v(t._s(t.version))])],1),t._v(" "),r("v-row",{staticClass:"mb-n4"},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Id:")]),t._v(" "),r("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[t._v(t._s(t.passportId))])],1)],1)],1),t._v(" "),0==t.claims.length?r("v-alert",{staticClass:"caption text-left mt-2",attrs:{border:"left","colored-border":"",type:"info",elevation:"2"}},[t._v("\n                No digital identity verified claims found.  To add verified claims, use the Bridge Passport Browser Extension and re-import your passport with the added claims.\n            ")]):t._e(),t._v(" "),t._l(t.claims,function(e,s){return r("v-expansion-panel",{key:e.id,on:{click:function(r){return t.claimSelected(e)}}},[r("v-expansion-panel-header",{staticClass:"left-border-color-primary pt-2 pb-2"},[r("v-row",[r("v-col",{attrs:{cols:"auto"}},[r("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[r("div",{staticClass:"mb-1 title-2",domProps:{textContent:t._s(e.claimTypeName)}}),t._v(" "),r("div",{staticClass:"caption",domProps:{textContent:t._s(e.claimValue)}})]),t._v(" "),r("v-row")],1)],1),t._v(" "),r("v-expansion-panel-content",{staticClass:"left-border-color-primary"},[r("v-container",{attrs:{fluid:""}},[r("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("\n                            Claim Details \n                        ")]),t._v(" "),r("v-divider",{staticClass:"mb-2"}),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Verified:")]),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.verifiedOn))])],1),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Expires:")]),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.expireDate))])],1),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Issuer:")]),t._v(" "),r("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.signedByName))])],1)],1)],1)],1)})],2)],1)],1)},staticRenderFns:[]},N=r("VU/8")(A,L,!1,null,null,null).exports;o.default.use(v.a);var E=new v.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:f},{path:"/about",component:b},{path:"/scan",component:y,props:function(t){return{qr:t.query.qr}}},{path:"/open",component:S},{path:"/unlock",component:R},{path:"/request",component:D},{path:"/identity",component:N,props:function(t){return{qr:t.query.qr}}}]}),U=r("//Fk"),V=r.n(U),F={getPassportContext:function(){var t=this;return i()(n.a.mark(function e(){var r,s,a,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=window.localStorage,s=r.getItem("passphrase"),a=r.getItem("passport"),i=void 0,null!=a&&(i=new BridgeProtocol.Models.Passport),null==a||null==s){t.next=8;break}return t.next=8,i.open(a,s);case 8:return t.abrupt("return",{passport:i,passphrase:s});case 9:case"end":return t.stop()}},e,t)}))()},setPassport:function(t){window.localStorage.setItem("passport",t)},setPassphrase:function(t){window.localStorage.setItem("passphrase",t)},clearPassport:function(){var t=window.localStorage;t.removeItem("passport"),t.removeItem("passphrase")},clearPassphrase:function(){window.localStorage.removeItem("passphrase")},version:function(){return chrome.runtime.getManifest().version},passportVersion:function(){return BridgeProtocol.Constants.passportVersion},createRandom:function(){return Math.random().toString(36).substr(2)},getWalletBalances:function(t){var e=this;return i()(n.a.mark(function r(){var s,a,i,o;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BridgeProtocol.Services.Blockchain.getBalances(t.network,t.address);case 2:if(s=e.sent,a=0,i=0,s)for(o=0;o<s.length;o++)"gas"===s[o].asset.toLowerCase()?a=s[o].balance:"eth"==s[o].asset.toLowerCase()&&(a=s[o].balance),"brdg"==s[o].asset.toLowerCase()&&(i=s[o].balance);return e.abrupt("return",{gas:a,brdg:i});case 7:case"end":return e.stop()}},r,e)}))()},getReadableDate:function(t,e){var r=(t=new Date(1e3*t)).toLocaleDateString();return e&&(r+=" "+t.toLocaleTimeString()),r},getReadableString:function(t){return t=(t=t.replace(/([A-Z])/g," $1")).charAt(0).toUpperCase()+t.slice(1)},getClaimType:function(t){var e=this;return i()(n.a.mark(function r(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BridgeProtocol.Services.Claim.getType(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r,e)}))()},getClaimTypes:function(t){var e=this;return i()(n.a.mark(function r(){var s,a,i;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",[]);case 2:s=[],a=0;case 4:if(!(a<t.length)){r.next=12;break}return r.next=7,e.getClaimType(t[a]);case 7:(i=r.sent)&&s.push(i);case 9:a++,r.next=4;break;case 12:return r.abrupt("return",s);case 13:case"end":return r.stop()}},r,e)}))()},getFullClaimsInfo:function(t){var e=this;return i()(n.a.mark(function r(){var s;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",null);case 2:s=0;case 3:if(!(s<t.length)){r.next=10;break}return r.next=6,e.getFullClaimInfo(t[s]);case 6:t[s]=r.sent;case 7:s++,r.next=3;break;case 10:return r.abrupt("return",t);case 11:case"end":return r.stop()}},r,e)}))()},getFullClaimInfo:function(t){var e=this;return i()(n.a.mark(function r(){var s,a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.id=Math.random().toString(36).substring(2)+Date.now().toString(36),t.verifiedOn=e.getReadableDate(t.createdOn),0==t.expiresOn?t.expireDate="Never":t.expireDate=e.getReadableDate(t.expiresOn),t.claimTypeName=t.claimTypeId,r.next=6,BridgeProtocol.Services.Claim.getType(t.claimTypeId);case 6:return(s=r.sent)&&(t.claimTypeName=s.name),r.next=10,BridgeProtocol.Utils.Crypto.getPassportIdForPublicKey(t.signedByKey);case 10:return t.signedById=r.sent,t.signedByName=t.signedById,r.next=14,BridgeProtocol.Services.Partner.getPartner(t.signedById);case 14:return(a=r.sent)&&(t.signedByName=a.name),r.abrupt("return",t);case 17:case"end":return r.stop()}},r,e)}))()},getPassportDetails:function(t,e,r){var s=this;return i()(n.a.mark(function a(){return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,BridgeProtocol.Services.Passport.getDetails(t,e,r);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},a,s)}))()},createAuthRequest:function(t,e,r,s){var a=this;return i()(n.a.mark(function i(){return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,BridgeProtocol.Messaging.Auth.createPassportChallengeRequest(t,e,r,s,[]);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},i,a)}))()},validateAuthRequest:function(t){var e=this;return i()(n.a.mark(function r(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BridgeProtocol.Messaging.Auth.verifyPassportChallengeRequest(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r,e)}))()},createAuthResponse:function(t,e,r,s){var a=this;return i()(n.a.mark(function i(){var o,c;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDecryptedClaims(s,e);case 2:return o=n.sent,c=[],n.next=6,BridgeProtocol.Messaging.Auth.createPassportChallengeResponse(t,e,r.publicKey,r.payload.token,o,c);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},i,a)}))()},validateAuthResponse:function(t,e,r,s){var a=this;return i()(n.a.mark(function i(){return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,BridgeProtocol.Messaging.Auth.verifyPassportChallengeResponse(t,e,s,r);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},i,a)}))()},waitGetAuthResponse:function(t){var e=this;return i()(n.a.mark(function r(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new V.a(function(e,r){!function(){var r=i()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,BridgeProtocol.Services.RequestRelay.getResponse(t);case 2:if(!(a=r.sent)||!a.response){r.next=6;break}return console.log("Response found"),r.abrupt("return",e(a.response));case 6:console.log("Response not found. Waiting and retrying."),setTimeout(s,5e3);case 8:case"end":return r.stop()}},r,this)}));function s(){return r.apply(this,arguments)}return s}()()}));case 1:case"end":return e.stop()}},r,e)}))()},waitVerifyPayment:function(t,e,r,s,a,o){var c=this;return i()(n.a.mark(function l(){return n.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",new V.a(function(c,l){!function(){var l=i()(n.a.mark(function i(){var l;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,BridgeProtocol.Services.Blockchain.verifyPayment(t,e,r,s,a,o);case 2:if(!(l=n.sent).complete){n.next=6;break}return console.log("Transaction found and complete"),n.abrupt("return",c(l.success));case 6:console.log("Transaction not complete. Waiting and retrying."),setTimeout(u,15e3);case 8:case"end":return n.stop()}},i,this)}));function u(){return l.apply(this,arguments)}return u}()()}));case 1:case"end":return c.stop()}},l,c)}))()},getBlockchainClaimPublishStatus:function(t,e,r,s){var a=this;return i()(n.a.mark(function i(){var o,c,l;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={status:0,text:a.getClaimPublishStatusText(0)},n.next=3,a.getPendingClaimPublishStatus(t,e,r.network,s);case 3:if((c=n.sent)&&(o=c),2==o.status||3==o.status){n.next=10;break}return n.next=8,BridgeProtocol.Services.Blockchain.getClaim(r.network,s,r.address);case 8:(l=n.sent)&&l.claim&&l.verified&&(o.status=1,o.text=l.claim.value);case 10:return n.abrupt("return",o);case 11:case"end":return n.stop()}},i,a)}))()},getPendingClaimPublishStatus:function(t,e,r,s){var a=this;return i()(n.a.mark(function i(){var o,c,l;return n.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,BridgeProtocol.Services.Claim.getPendingClaimPublishList(t,e);case 2:o=n.sent,c=0;case 4:if(!(c<o.length)){n.next=12;break}if(o[c].claimTypeId!==s||o[c].network.toLowerCase()!==r.toLowerCase()){n.next=9;break}return l=2,"neo"===r.toLowerCase()&&9==o[c].status&&(l=3),n.abrupt("return",{id:o[c].id,status:l,text:a.getClaimPublishStatusText(l,o[c].network),txId:o[c].claimPublishTransactionId});case 9:c++,n.next=4;break;case 12:return n.abrupt("return",null);case 13:case"end":return n.stop()}},i,a)}))()},getClaimPublishStatusText:function(t,e){var r=void 0;switch(t){case 1:r="Published";break;case 2:r=e&&"eth"===e.toLowerCase()?"Pending Publish":"Pending Publish Approval";break;case 3:r="Publishing Approved";break;default:r="Not Published"}return r}},Q=r("Zrlr"),O=r.n(Q),j=function t(){var e,r=this;O()(this,t),this.create=(e=i()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new V.a(function(t,r){cordova.plugins.qrcodejs.encode("TEXT_TYPE",e,function(e){t(e)},function(t){r(t)},{width:250,height:250,colorDark:"#000000",colorLight:"#ffffff"})}));case 1:case"end":return t.stop()}},t,r)})),function(t){return e.apply(this,arguments)})},W=function t(){var e=this;O()(this,t),this.scan=i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new V.a(function(t,e){window.QRScanner.show(function(r){console.log(r),window.QRScanner.scan(function(r,s){r&&(console.log("Error: "+r),e(r)),console.log("Code found: "+s),t(s)})})}));case 1:case"end":return t.stop()}},t,e)})),this.cancel=function(){window.QRScanner.destroy(function(t){console.log(t)})}};({initialize:function(){document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1)},onDeviceReady:function(){var t=i()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("deviceready"),$(".loading").hide(),o.default.config.productionTip=!1,o.default.use(l.a),o.default.prototype.$BridgeProtocol=BridgeProtocol,o.default.prototype.$BridgeMobile=F,o.default.prototype.$QrCodeGenerator=new j,o.default.prototype.$QrCodeScanner=new W,new o.default({el:"#app",vuetify:new l.a({theme:{themes:{dark:{primary:"#904099",secondary:"#6155a3",accent:"#3c7fc6",info:"#6155a3",error:"#b71c1c"}}}}),router:E,components:{App:d},template:"<App/>"}),console.log("Vue initialized"),$(".scan-qr-cancel").click(function(){$("#app_wrapper").show(),$(".scan-qr-overlay").hide(),window.QRScanner.destroy(function(t){console.log(t)})});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}).initialize()},O20d:function(t,e,r){t.exports=r.p+"static/img/scan-qr-icon.819b641.png"},ibFO:function(t,e,r){t.exports=r.p+"static/img/bridge-passport.7b3b5a6.png"}},["NHnr"]);
//# sourceMappingURL=app.6c20b6d1d5dbbb65c6b0.js.map