webpackJsonp([1],{IKFS:function(t,e,s){t.exports=s.p+"static/img/scan-qr2-icon.5e0cb23.png"},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Xxa5"),a=s.n(r),n=s("//Fk"),i=s.n(n),o=s("exGp"),c=s.n(o),l=s("Zrlr"),u=s.n(l),p=s("7+uW"),d=s("3EgV"),v=s.n(d),m={name:"bridge-passport-app",data:function(){return{name:"App",qr:null,loading:!0,passport:null,passportLoaded:!1,passportUnlocked:!1}},methods:{openUrl:function(t){window.open(t)},init:function(){var t=c()(a.a.mark(function t(){var e,s,r,n,i,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=new URLSearchParams(window.location.search),s=e.get("t"),!(r=e.get("v"))){t.next=21;break}if(this.qr=r,"passport"!=s){t.next=19;break}return t.next=8,this.$BridgeProtocol.Services.RequestRelay.getRequest(this.qr);case 8:if(!(n=t.sent)||!n.request){t.next=16;break}return i=window.localStorage,t.next=13,i.setItem("passport",n.request);case 13:this.$router.push({path:"/unlock"}),t.next=17;break;case 16:this.$router.push({path:"/open",query:{}});case 17:t.next=20;break;case 19:"auth"==s&&this.$router.push({path:"/scan",query:{qr:r}});case 20:this.$router.go(1);case 21:i=window.localStorage,o=i.getItem("passport"),c=i.getItem("passphrase"),this.passportLoaded=null!=o,this.passportUnlocked=null!=c,this.passportLoaded?this.passportLoaded&&!this.passportUnlocked&&(this.$router.push({path:"/unlock",query:{}}),this.$router.go(1)):(this.$router.push({path:"/open",query:{}}),this.$router.go(1)),this.loading=!1;case 28:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),unload:function(){var t=window.localStorage;t.removeItem("passphrase"),t.removeItem("passport"),location.href="app.html"},lock:function(){window.localStorage.removeItem("passphrase"),location.href="app.html"}},created:function(){this.$vuetify.theme.dark=!0,this.$vuetify.theme.primary="#673ab7"},mounted:function(){this.$nextTick(function(){this.init()})}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"bridge-passport"}},[t.passportLoaded&&t.passportUnlocked?s("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("v-tabs",{attrs:{dark:""}},[s("v-tab",[s("router-link",{staticClass:"router-link",attrs:{to:"/identity"}},[t._v("Identity")])],1),t._v(" "),s("v-tab",[s("router-link",{staticClass:"router-link",attrs:{to:"/scan"}},[t._v("Scan")])],1),t._v(" "),s("v-tab",[s("router-link",{staticClass:"router-link",attrs:{to:"/request"}},[t._v("Request")])],1)],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-menu",{attrs:{"close-on-click":"","offset-y":"",small:"",dark:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[s("v-btn",t._g({attrs:{icon:""}},r),[s("v-icon",{attrs:{small:"",color:"white"}},[t._v("mdi-dots-vertical")])],1)]}}],null,!1,2291122027)},[t._v(" "),s("v-list",{attrs:{dense:""}},[s("v-subheader",{attrs:{inset:""}},[t._v("Passport Options")]),t._v(" "),s("v-divider",{attrs:{inset:""}}),t._v(" "),s("v-list-item",{attrs:{"two-line":""},on:{click:t.lock}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-lock")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v("Lock Passport")]),t._v(" "),s("v-list-item-subtitle",[t._v("\n                Clear your passphrase but keep the passport json cached for future use\n            ")])],1)],1),t._v(" "),s("v-list-item",{attrs:{"two-line":""},on:{click:t.unload}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-close")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v("Unload Passport")]),t._v(" "),s("v-list-item-subtitle",[t._v("\n                Clear your passphrase and clear the cached the passport json\n            ")])],1)],1),t._v(" "),s("v-divider",{attrs:{inset:""}}),t._v(" "),s("router-link",{staticClass:"router-link",attrs:{to:"/about"}},[s("v-list-item",[s("v-list-item-icon",[s("v-icon",[t._v("mdi-information")])],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v("About Bridge Passport")])],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),s("v-main",[s("v-container",{staticClass:"fill-height justify-center text-center inverted",attrs:{fluid:""}},[s("v-overlay",{attrs:{value:t.loading}},[s("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),t._v(" "),s("router-view")],1)],1)],1)},staticRenderFns:[]},f=s("VU/8")(m,h,!1,null,null,null).exports,g=s("/ocq"),_={data:function(){return{passportId:null}},methods:{init:function(){var t=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$BridgeMobile.getPassportContext();case 2:(e=t.sent).passport&&(this.passportId=e.passport.id);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},mounted:function(){this.$nextTick(function(){this.init()})}},b={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{"fill-height":"","justify-center":""}},[e("div",[e("img",{attrs:{src:s("ibFO")}}),this._v(" "),e("div",{staticClass:"mt-2"},[this._v("\n            "+this._s(this.passportId)+"\n        ")])])])},staticRenderFns:[]},x=s("VU/8")(_,b,!1,null,null,null).exports,w={data:function(){return{visible:!0,currentYear:(new Date).getFullYear(),version:"1.0.0"}},methods:{openUrl:function(t){window.open(t)},close:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("v-app-bar",{staticClass:"text-center",attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("h3",[t._v("About Bridge Passport Mobile")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-icon",{on:{click:t.close}},[t._v("mdi-close")])],1),t._v(" "),s("v-card",{staticStyle:{position:"absolute",top:"60px"}},[s("v-card-text",{staticClass:"inverted text-left"},[s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Version Info")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v("\n                "+t._s(t.version)+"\n            ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("License")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v('\n                This software is licensed under the Apache 2.0 License and is being provided to you on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  Bridge Protocol Corporation will not be held liable for any loss or damages resulting from the use of this software.  If you do not agree with these terms, you must stop using this software immediately.  Please review the '),s("a",{on:{click:function(e){return t.openUrl("https://bridge-protocol.github.io/docs/license")}}},[t._v("Bridge Network terms of service")]),t._v(" and "),s("a",{on:{click:function(e){return t.openUrl("https://bridge-protocol.github.io/docs/tos")}}},[t._v("open source license")]),t._v(" before using this software.\n            ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Limitation of Liability")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v("\n                It is your responsibility to ensure that you backup your passport and associated blockchain wallet private keys.  Bridge Protocol Corporation will not be held responsible for loss of funds, verified claims data, or any other damages resulting from the use of this software.\n            ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2"},[t._v("Assignment of Copyright")]),t._v(" "),s("v-divider",{staticClass:"mt-n1 mb-1"}),t._v(" "),s("p",[t._v('\n                This software, "Bridge" Logo, and any other related content are Copyright Â©2018-'),s("span",[t._v(t._s(t.currentYear))]),t._v(" Bridge Protocol Corporation, All Rights Reserved.  Some portions of this software and logos are copyright to their respective owners.\n            ")]),t._v(" "),s("div",{staticClass:"text-center"},[s("v-btn",{on:{click:t.close}},[t._v("\n                    Close\n                ")])],1)],1)],1)],1)},staticRenderFns:[]},C=s("VU/8")(w,y,!1,null,null,null).exports,k={props:["qr"],data:function(){return{qrcode:null,id:null,loading:!1,loadStatus:"Please Wait",requestLoaded:!1,requestMessage:null,messageValid:!1,requestingPassport:null,requestedClaimTypes:[],selectedClaimTypes:[],requestSent:!1,error:!1,errorMessage:"An error occurred"}},methods:{init:function(){var t=this;return c()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=t,t.loading=!0,setTimeout(c()(a.a.mark(function t(){var e,r,n,i,o,c,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(e=s.qr)&&"undefined"!=e&&0!=e.length){t.next=4;break}return s.loading=!1,t.abrupt("return");case 4:return s.loading=!0,s.loadStatus="Decrypting and Validating Request",s.id=s.qr,t.next=9,s.$BridgeProtocol.Services.RequestRelay.getRequest(s.id);case 9:return r=t.sent,t.next=12,s.$BridgeMobile.validateAuthRequest(r.request);case 12:return s.requestMessage=t.sent,s.messageValid=s.requestMessage.signatureValid,t.next=16,s.$BridgeMobile.getPassportContext();case 16:return n=t.sent,t.next=19,s.$BridgeMobile.getPassportDetails(n.passport,n.passphrase,s.requestMessage.passportId);case 19:return(i=t.sent).name=i.id,i.known=!1,i.partnerName&&i.partnerName.length>0&&(i.name=i.partnerName,i.known=!0),s.requestingPassport=i,t.next=26,s.$BridgeMobile.getClaimTypes(s.requestMessage.payload.claimTypes);case 26:if(o=t.sent)for(c=0;c<o.length;c++)l=n.passport.getClaimPackage(o[c].id),o[c].claim=null!=l;s.requestedClaimTypes=o,s.requestLoaded=!0,s.loading=!1;case 31:case"end":return t.stop()}},t,this)})),500);case 3:case"end":return e.stop()}},e,t)}))()},scan:function(){location.href="index.html?s=true&t=auth"},sendClaims:function(){var t=this;return c()(a.a.mark(function e(){var s,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.selectedClaimTypes.length){e.next=4;break}return t.error=!0,t.errorMessage="You must select at least one claim type.",e.abrupt("return");case 4:return t.loading=!0,t.loadStatus="Encrypting Claims",e.next=8,app.$BridgeMobile.getPassportContext();case 8:return s=e.sent,e.next=11,app.$BridgeMobile.createAuthResponse(s.passport,s.passphrase,t.requestMessage,t.selectedClaimTypes);case 11:return r=e.sent,t.loadStatus="Sending Response",e.next=15,app.$BridgeProtocol.Services.RequestRelay.createResponse(t.id,r);case 15:e.sent,t.requestSent=!0,t.loading=!1;case 18:case"end":return e.stop()}},e,t)}))()},cancel:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)}},mounted:function(){this.$nextTick(c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.init();case 2:case"end":return t.stop()}},t,this)})))}},S={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"justify-center":"",dark:""}},[r("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[r("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Identification Claims Request")])]),t._v(" "),t.loading?r("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[r("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[r("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.loading||!t.requestLoaded||t.requestSent?t._e():r("v-container",{staticStyle:{position:"absolute",top:"10px",left:"0px"},attrs:{"align-top":"","justify-center":"","mt-0":"","pt-0":"","mx-2":"","text-left":""}},[t.messageValid?t._e():r("v-alert",{staticClass:"text-left caption text-wrap mx-n6 mt-n4",attrs:{border:"left","colored-border":"",type:"warning",elevation:"0"}},[t._v("\n            Request integrity check failed.  This request may be forged, proceed with caution.\n        ")]),t._v(" "),r("p",{staticClass:"subheading"},[t._v("\n            You have been asked to provide information about your identity.  Select the information you want to include in your response by checking the boxes.\n        ")]),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-n4 caption"},[t._v("Requesting Passport Identity")]),t._v(" "),r("v-divider",{staticClass:"my-n1"}),t._v(" "),r("v-container",{staticClass:"mx-0 px-0 my-n2 py-0",attrs:{fluid:""}},[r("v-row",[r("v-col",{attrs:{cols:"auto"}},[t.requestingPassport.known?r("span",[r("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-decagram")]),t._v(" "+t._s(t.requestingPassport.name))],1):t._e(),t.requestingPassport.known?t._e():r("span",[r("v-icon",{attrs:{small:"",color:"warning"}},[t._v("mdi-alert")]),t._v(" Unknown Passport ("+t._s(t.requestingPassport.id)+")")],1)])],1)],1),t._v(" "),r("v-subheader",{staticClass:"pl-0 ml-0 mt-0 caption"},[t._v("Requested Claims")]),t._v(" "),r("v-divider",{staticClass:"my-n1"}),t._v(" "),t.requestedClaimTypes&&0!=t.requestedClaimTypes.length?t._e():r("v-container",{attrs:{fluid:""}},[t._v("\n            No Claims Requested\n        ")]),t._v(" "),t._l(t.requestedClaimTypes,function(e,s){return r("v-container",{key:e.id,attrs:{fluid:""}},[r("v-checkbox",{staticClass:"px-0 mt-0 mb-n8",attrs:{label:e.name,value:e.id,disabled:!e.claim},model:{value:t.selectedClaimTypes,callback:function(e){t.selectedClaimTypes=e},expression:"selectedClaimTypes"}})],1)}),t._v(" "),r("div",{staticClass:"mt-8 text-center"},[t.error?r("v-alert",{staticStyle:{"font-size":".9em"},attrs:{dense:"",outlined:"",type:"error"}},[t._v("\n                "+t._s(t.errorMessage)+"\n            ")]):t._e(),t._v(" "),r("div",[r("v-btn",{staticClass:"button-light",on:{click:t.sendClaims}},[t._v("\n                    Send Claims\n                ")]),t._v(" "),r("v-btn",{on:{click:t.cancel}},[t._v("\n                    Cancel\n                ")])],1)],1)],2),t._v(" "),t.loading||t.requestLoaded||t.requestSent?t._e():r("v-container",{attrs:{"justify-center":"","text-center":""}},[r("center",[r("img",{staticStyle:{width:"70%"},attrs:{src:s("IKFS")}}),t._v(" "),r("p",{staticStyle:{"text-align":"justify",width:"90%",margin:"20px 0px 30px 0px"}},[t._v("\n                Align your mobile device over the device making the request to capture the QR code.  Once scanned, you will be prompted to choose which information to present.\n            ")])]),t._v(" "),r("v-btn",{staticClass:"button-light",on:{click:t.scan}},[t._v("\n            Scan QR Code\n        ")]),t._v(" "),r("v-btn",{on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])],1),t._v(" "),!t.loading&&t.requestSent?r("v-container",[r("v-container",{staticClass:"my-4"},[r("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-check-decagram")]),t._v(" Identity Claim(s) Sent Successfully.\n        ")],1),t._v(" "),r("v-btn",{on:{click:t.cancel}},[t._v("\n            Done\n        ")])],1):t._e()],1)},staticRenderFns:[]},P=s("VU/8")(k,S,!1,null,null,null).exports,q={props:["qr"],data:function(){return{loading:!1,scan:!1,loadStatus:"Please Wait",passport:null}},methods:{init:function(){var t=this;setTimeout(c()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.qr){e.next=14;break}return t.loading=!0,e.prev=2,e.next=5,t.$BridgeProtocol.Services.RequestRelay.getRequest(t.qr);case 5:s=e.sent,t.passport=s.request,t.loading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0.message),t.loading=!1;case 14:case"end":return e.stop()}},e,this,[[2,10]])})),500)},doScan:function(){var t=this;return c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.scan=!0,e.next=3,t.$QrCodeScanner.scan();case 3:e.sent;case 4:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$nextTick(function(){this.init()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},R={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[r("v-overlay",{attrs:{value:t.loading}},[r("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[r("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1),t._v(" "),t.loading||t.scan?t._e():r("v-container",{staticClass:"justify-center text-center"},[t.loading?t._e():r("v-app-bar",{attrs:{app:"","clipped-left":"",color:"color-gradient"}},[r("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Import Bridge Passport")])]),t._v(" "),r("center",[r("img",{staticStyle:{width:"70%"},attrs:{src:s("O20d")}}),t._v(" "),r("p",{staticStyle:{"text-align":"justify",width:"70%",margin:"20px 0px 30px 0px"}},[t._v('\n                Open your Bridge Passport Browser Extension and click "Send to Mobile" to generate your handoff QR code.  Click below to scan the QR code and import your Bridge Identity.\n            ')])]),t._v(" "),r("v-btn",{staticClass:"button-light",on:{click:t.doScan}},[t._v("Scan QR Code")])],1),t._v(" "),!t.loading&&t.scan?r("div",{staticClass:"scan-qr-overlay"},[r("div",{staticClass:"scan-qr-header color-gradient"},[t._v("\n            Scan QR Code\n            "),r("span",{staticClass:"scan-qr-cancel"},[r("i",{staticClass:"mdi mdi-close",staticStyle:{"font-size":"16px"}})])]),t._v(" "),r("div",{staticClass:"scan-qr-target"}),t._v(" "),r("div",{staticClass:"scan-qr-footer color-gradient"})]):t._e()],1)},staticRenderFns:[]},B=s("VU/8")(q,R,!1,null,null,null).exports,I={props:[],data:function(){return{loading:!0,passportContent:null,unlockPassword:null,unlockErrorMessage:null}},methods:{init:function(){var t=window.localStorage;this.passportContent=t.getItem("passport"),this.loading=!1},verifyUnlockPassword:function(){var t=c()(a.a.mark(function t(){var e,s,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new app.$BridgeProtocol.Models.Passport,s=!1,t.prev=2,t.next=5,e.open(this.passportContent,this.unlockPassword);case 5:s=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0.message);case 11:s?((r=window.localStorage).setItem("passport",this.passportContent),r.setItem("passphrase",this.unlockPassword),location.href="app.html"):this.unlockErrorMessage="Invalid password, try again.";case 12:case"end":return t.stop()}},t,this,[[2,8]])}));return function(){return t.apply(this,arguments)}}(),unload:function(){var t=window.localStorage;t.removeItem("passphrase"),t.removeItem("passport"),location.href="app.html"}},mounted:function(){this.$nextTick(function(){this.init()})}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[s("v-overlay",{attrs:{value:t.loading}},[s("v-progress-circular",{attrs:{size:50,color:"primary",indeterminate:""}})],1),t._v(" "),t.loading?t._e():s("v-card",{attrs:{inverted:""}},[s("v-toolbar",{attrs:{color:"color-gradient",dark:""}},[s("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Unlock Passport")])],1),t._v(" "),s("v-card-text",[s("div",{staticClass:"caption text-justify mt-4"},[t._v("\n                To unlock your passport, please provide the password you provided when it was created.\n            ")]),t._v(" "),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{outlined:"",color:"secondary",label:"Password",type:"password",required:""},model:{value:t.unlockPassword,callback:function(e){t.unlockPassword=e},expression:"unlockPassword"}}),t._v(" "),s("div",[t._v(t._s(t.unlockErrorMessage)),s("p")])],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:""},on:{click:function(e){return t.unload()}}},[t._v("Unload Passport")]),t._v(" "),s("v-btn",{attrs:{color:"accent"},on:{click:function(e){return t.verifyUnlockPassword()}}},[t._v("Unlock")])],1)],1)],1)},staticRenderFns:[]},$=s("VU/8")(I,T,!1,null,null,null).exports,M=s("mvHQ"),D=s.n(M),A={props:[],data:function(){return{loading:!1,loadStatus:"Please Wait",error:!1,errorMessage:"An error occurred",qr:null,dialog:!1,claims:[],token:null,response:null,lastSelectedClaim:""}},methods:{init:function(){var t=this;return c()(a.a.mark(function e(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,t)}))()},showQR:function(){var t=this;return c()(a.a.mark(function e(){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.claims.length){e.next=4;break}return t.error=!0,t.errorMessage="You must select at least one claim type.",e.abrupt("return");case 4:s=t,setTimeout(c()(a.a.mark(function t(){var e,r,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loading=!0,s.loadStatus="Generating Request Code",t.next=4,s.$BridgeMobile.getPassportContext();case 4:return e=t.sent,s.token=s.$BridgeMobile.createRandom(),t.next=8,s.$BridgeMobile.createAuthRequest(e.passport,e.passphrase,s.token,s.claims);case 8:return r=t.sent,t.next=11,s.$BridgeProtocol.Services.RequestRelay.createRequest(2,r);case 11:if((n=t.sent)||n.id){t.next=15;break}return s.loading=!1,t.abrupt("return");case 15:return t.next=17,s.$QrCodeGenerator.create(n.id);case 17:return s.qr=t.sent,s.dialog=!0,s.loading=!1,t.next=22,s.$BridgeMobile.waitGetAuthResponse(n.id);case 22:i=t.sent,s.dialog=!1,s.loading=!0,s.loadStatus="Response Received",setTimeout(c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.loadStatus="Decrypting and Validating Response",t.next=3,s.$BridgeMobile.getPassportContext();case 3:return e=t.sent,t.next=6,s.$BridgeMobile.validateAuthResponse(e.passport,e.passphrase,s.token,i);case 6:return s.response=t.sent,t.next=9,s.$BridgeMobile.getFullClaimsInfo(s.response.claims);case 9:s.claims=t.sent,console.log(D()(s.response)),s.loading=!1;case 12:case"end":return t.stop()}},t,this)})),1e3);case 27:case"end":return t.stop()}},t,this)})),500);case 6:case"end":return e.stop()}},e,t)}))()},closeQR:function(){this.qr=null,this.dialog=!1},cancel:function(){this.$router.push({path:"/home",query:{}}),this.$router.go(1)},claimSelected:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.polling=!1,this.lastSelectedClaim==e.claimTypeId?this.lastSelectedClaim="":this.lastSelectedClaim=e.claimTypeId;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getDate:function(t){return app.$BridgeMobile.getReadableDate(t)}},mounted:function(){this.$nextTick(function(){this.init()})}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"fill-height":"","justify-center":"",dark:""}},[s("v-app-bar",{staticClass:"text-center",attrs:{app:"","clipped-left":"",color:"color-gradient"}},[s("h3",{staticStyle:{width:"100%","text-align":"center"}},[t._v("Request Identification Claims")])]),t._v(" "),t.loading?s("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[s("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[s("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.loading||t.dialog||t.response?t._e():s("v-container",{staticStyle:{position:"absolute",top:"10px",left:"0px"},attrs:{"mx-2":""}},[s("p",{staticClass:"subheading text-justify"},[t._v("\n            Choose the identity claims you want to request.\n        ")]),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n2 caption"},[t._v("Anonymous Claim Types")]),t._v(" "),s("v-divider",{staticClass:"my-n1"}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Over 18",value:"100001",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Over 21",value:"100002",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Country",value:"100003",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{attrs:{label:"State / Province",value:"100004",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-subheader",{staticClass:"pl-0 ml-0 mt-n1 caption"},[t._v("Private Claim Types")]),t._v(" "),s("v-divider",{staticClass:"my-n1"}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"First Name",value:"1",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"Last Name",value:"2",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-n6",attrs:{label:"E-mail Address",value:"3",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),s("v-checkbox",{staticClass:"mb-6",attrs:{label:"Date of Birth",value:"4",dense:""},model:{value:t.claims,callback:function(e){t.claims=e},expression:"claims"}}),t._v(" "),t.error?s("v-alert",{staticStyle:{"font-size":".9em"},attrs:{dense:"",outlined:"",type:"error"}},[t._v("\n            "+t._s(t.errorMessage)+"\n        ")]):t._e(),t._v(" "),s("v-btn",{staticClass:"button-light mr-1",on:{click:t.showQR}},[t._v("\n            Request Claims\n        ")]),t._v(" "),s("v-btn",{on:{click:t.cancel}},[t._v("\n            Cancel\n        ")])],1),t._v(" "),t.loading||t.dialog||!t.response?t._e():s("v-container",{staticStyle:{position:"absolute",top:"0px",left:"0px"}},[s("v-expansion-panels",[0==t.claims.length?s("v-alert",{staticClass:"caption text-left mt-2",attrs:{border:"left","colored-border":"",type:"info",elevation:"2"}},[t._v("\n                No digital identity verified claims found.  To add verified claims, use the Bridge Passport Browser Extension and re-import your passport with the added claims.\n            ")]):t._e(),t._v(" "),t._l(t.claims,function(e,r){return s("v-expansion-panel",{key:e.id,staticClass:"mb-1 ml-0 px-0 py-0",on:{click:function(s){return t.claimSelected(e)}}},[s("v-expansion-panel-header",{staticClass:"py-0"},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[s("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[s("div",{staticClass:"mb-1 title-2",domProps:{textContent:t._s(e.claimTypeName)}}),t._v(" "),s("div",{staticClass:"caption",domProps:{textContent:t._s(e.claimValue)}})]),t._v(" "),s("v-row")],1)],1),t._v(" "),s("v-expansion-panel-content",{staticClass:"py-0"},[s("v-container",{attrs:{fluid:""}},[s("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("\n                            Claim Details \n                        ")]),t._v(" "),s("v-divider",{staticClass:"mb-2"}),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Verified:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.verifiedOn))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Expires: ")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.expireDate))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Issuer:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.signedByName))])],1)],1)],1)],1)})],2),t._v(" "),s("v-btn",{staticClass:"button-light mt-4",on:{click:t.cancel}},[t._v("\n            Done\n        ")])],1),t._v(" "),s("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",{attrs:{"fill-height":"","justify-center":"",dark:""}},[s("v-toolbar",{attrs:{color:"color-gradient",dark:""}},[s("v-toolbar-title",{staticClass:"subtitle-1"},[t._v("Claims Request Code")])],1),t._v(" "),s("v-card-text",[s("p",{staticClass:"mt-3"},[t._v("Scan this QR Code with the target Bridge Mobile Passport App to request identification claims.")]),t._v(" "),s("center",[s("div",{staticStyle:{"background-color":"white",height:"260px",width:"260px","padding-top":"5px"}},[null!=t.qr?s("img",{attrs:{src:t.qr}}):t._e()])]),t._v(" "),s("div",{staticClass:"text-center m-6"},[s("v-progress-circular",{staticClass:"my-4",attrs:{size:25,color:"primary",indeterminate:""}}),t._v(" "),s("br"),t._v("\n             Waiting for response...\n             "),s("br"),s("br"),t._v(" "),s("v-btn",{staticStyle:{width:"70%"},on:{click:t.closeQR}},[t._v("\n            Cancel\n            ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},N=s("VU/8")(A,L,!1,null,null,null).exports,E={name:"passport-details",components:{},data:function(){return{loadStatus:"Loading Bridge Identity",mainContainerHeight:690,passportId:"",passportDetailSelected:!1,passportNeoLoading:!1,passportEthLoading:!1,passportNeoPending:!1,passportEthPending:!1,passportNeoPublished:!1,passportEthPublished:!1,version:null,publicKey:"",lastSelectedClaim:"",neoWallet:null,ethWallet:null,neoWait:!1,ethWait:!1,refreshing:!0,claims:[],publishClaim:null,publishDialog:!1,publishClaimDialog:!1,polling:!1,neoPublishing:!1}},methods:{init:function(){var t=c()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,setTimeout(c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.refreshing=!0,e.passportId="",e.publicKey="",t.next=5,e.$BridgeMobile.getPassportContext();case 5:return e.passportContext=t.sent,e.passportId=e.passportContext.passport.id,e.publicKey=e.passportContext.passport.publicKey,e.version=e.$BridgeMobile.passportVersion(),e.neoWallet=e.passportContext.passport.getWalletForNetwork("neo"),e.ethWallet=e.passportContext.passport.getWalletForNetwork("eth"),t.next=13,e.refreshClaims();case 13:e.mainContainerHeight=e.$refs.mainContainer.clientHeight;case 14:case"end":return t.stop()}},t,this)})),500);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),refreshClaims:function(){var t=c()(a.a.mark(function t(){var e,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.refreshing=!0,this.loadStatus="Decrypting Identity Claims",this.claims=[],t.next=5,this.$BridgeMobile.getPassportContext();case 5:return e=t.sent,t.next=8,e.passport.getDecryptedClaims(null,e.passphrase);case 8:return s=t.sent,t.next=11,BridgeMobile.getFullClaimsInfo(s);case 11:this.claims=t.sent,this.refreshing=!1;case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),passportDetail:function(){var t=c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.polling=!1,this.passportDetailSelected=!this.passportDetailSelected,!this.passportDetailSelected){t.next=5;break}return t.next=5,this.refreshPassportDetail();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),claimSelected:function(){var t=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.polling=!1,this.lastSelectedClaim==e.claimTypeId?this.lastSelectedClaim="":this.lastSelectedClaim=e.claimTypeId;case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getDate:function(t){return this.$BridgeMobile.getReadableDate(t)},openUrl:function(t){window.open(t)}},mounted:function(){var t=c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$nextTick(function(){this.init()});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{ref:"mainContainer",staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-start":"","text-center":""}},[t.refreshing?s("v-container",{staticClass:"mx-0 my-0 px-0 py-0",attrs:{"fill-height":"","align-middle":""}},[s("v-progress-circular",{staticStyle:{"margin-left":"48%"},attrs:{indeterminate:"",color:"secondary"}},[s("div",{staticClass:"pt-4 mt-12 text-no-wrap"},[t._v("\n            "+t._s(t.loadStatus)+"\n        ")])])],1):t._e(),t._v(" "),t.refreshing?t._e():s("v-container",{staticStyle:{position:"relative",top:"10px",left:"0px"},attrs:{"px-0":"","py-0":"","mx-0":"","my-0":""}},[s("v-expansion-panels",[s("v-expansion-panel",{on:{click:t.passportDetail}},[s("v-expansion-panel-header",{staticClass:"left-border-color-primary pt-1 pb-1"},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[s("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),s("v-col",{attrs:{cols:"8"}},[s("div",{staticClass:"mb-1 title-2"},[t._v("Id")]),t._v(" "),s("div",{staticClass:"caption",staticStyle:{"word-break":"break-all"},domProps:{textContent:t._s(t.passportId)}})]),t._v(" "),s("v-row")],1)],1),t._v(" "),s("v-expansion-panel-content",{staticClass:"left-border-color-primary"},[s("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("Passport Details")]),t._v(" "),s("v-divider",{staticClass:"mb-2"}),t._v(" "),s("v-row",{staticClass:"mb-n4"},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Version:")]),t._v(" "),s("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[t._v(t._s(t.version))])],1),t._v(" "),s("v-row",{staticClass:"mb-n4"},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Id:")]),t._v(" "),s("v-col",{staticClass:"text-left",attrs:{cols:"auto"}},[t._v(t._s(t.passportId))])],1)],1)],1),t._v(" "),0==t.claims.length?s("v-alert",{staticClass:"caption text-left mt-2",attrs:{border:"left","colored-border":"",type:"info",elevation:"2"}},[t._v("\n                No digital identity verified claims found.  To add verified claims, use the Bridge Passport Browser Extension and re-import your passport with the added claims.\n            ")]):t._e(),t._v(" "),t._l(t.claims,function(e,r){return s("v-expansion-panel",{key:e.id,on:{click:function(s){return t.claimSelected(e)}}},[s("v-expansion-panel-header",{staticClass:"left-border-color-primary pt-1 pb-1"},[s("v-row",[s("v-col",{attrs:{cols:"auto"}},[s("v-img",{attrs:{src:"./img/bridge-token-white.png",height:"40",width:"40"}})],1),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[s("div",{staticClass:"mb-1 title-2",domProps:{textContent:t._s(e.claimTypeName)}}),t._v(" "),s("div",{staticClass:"caption",domProps:{textContent:t._s(e.claimValue)}})]),t._v(" "),s("v-row")],1)],1),t._v(" "),s("v-expansion-panel-content",{staticClass:"left-border-color-primary"},[s("v-container",{attrs:{fluid:""}},[s("v-subheader",{staticClass:"pl-0 ml-0 caption"},[t._v("\n                            Claim Details \n                        ")]),t._v(" "),s("v-divider",{staticClass:"mb-2"}),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Verified:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.verifiedOn))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Expires:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.expireDate))])],1),t._v(" "),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"text-left",attrs:{cols:"2"}},[t._v("Issuer:")]),t._v(" "),s("v-col",{attrs:{cols:"auto"}},[t._v(t._s(e.signedByName))])],1)],1)],1)],1)})],2)],1)],1)},staticRenderFns:[]},V=s("VU/8")(E,U,!1,null,null,null).exports;p.default.use(g.a);var F=new g.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:x},{path:"/about",component:C},{path:"/scan",component:P,props:function(t){return{qr:t.query.qr}}},{path:"/open",component:B},{path:"/unlock",component:$},{path:"/request",component:N},{path:"/identity",component:V,props:function(t){return{qr:t.query.qr}}}]});function O(){p.default.config.productionTip=!1,p.default.use(v.a),p.default.prototype.$BridgeProtocol=BridgeProtocol;p.default.prototype.$QrCodeGenerator=new function t(){var e,s=this;u()(this,t),this.create=(e=c()(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t,s){cordova.plugins.qrcodejs.encode("TEXT_TYPE",e,function(e){t(e)},function(t){s(t)},{width:250,height:250,colorDark:"#000000",colorLight:"#ffffff"})}));case 1:case"end":return t.stop()}},t,s)})),function(t){return e.apply(this,arguments)})};p.default.prototype.$QrCodeScanner=new function t(){var e=this;u()(this,t),this.scan=c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new i.a(function(t,e){window.QRScanner.show(function(s){console.log(s),window.QRScanner.scan(function(s,r){s&&(console.log("Error: "+s),e(s)),console.log("Code found: "+r),t(r)})})}));case 1:case"end":return t.stop()}},t,e)}))},p.default.prototype.$BridgeMobile={getPassportContext:function(){var t=this;return c()(a.a.mark(function e(){var s,r,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=window.localStorage,r=s.getItem("passphrase"),n=s.getItem("passport"),i=void 0,null!=n&&(i=new BridgeProtocol.Models.Passport),null==n||null==r){t.next=8;break}return t.next=8,i.open(n,r);case 8:return t.abrupt("return",{passport:i,passphrase:r});case 9:case"end":return t.stop()}},e,t)}))()},setPassport:function(t){window.localStorage.setItem("passport",t)},setPassphrase:function(t){window.localStorage.setItem("passphrase",t)},clearPassport:function(){var t=window.localStorage;t.removeItem("passport"),t.removeItem("passphrase")},clearPassphrase:function(){window.localStorage.removeItem("passphrase")},version:function(){return chrome.runtime.getManifest().version},passportVersion:function(){return BridgeProtocol.Constants.passportVersion},createRandom:function(){return Math.random().toString(36).substr(2)},getWalletBalances:function(t){var e=this;return c()(a.a.mark(function s(){var r,n,i,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BridgeProtocol.Services.Blockchain.getBalances(t.network,t.address);case 2:if(r=e.sent,n=0,i=0,r)for(o=0;o<r.length;o++)"gas"===r[o].asset.toLowerCase()?n=r[o].balance:"eth"==r[o].asset.toLowerCase()&&(n=r[o].balance),"brdg"==r[o].asset.toLowerCase()&&(i=r[o].balance);return e.abrupt("return",{gas:n,brdg:i});case 7:case"end":return e.stop()}},s,e)}))()},getReadableDate:function(t,e){var s=(t=new Date(1e3*t)).toLocaleDateString();return e&&(s+=" "+t.toLocaleTimeString()),s},getReadableString:function(t){return t=(t=t.replace(/([A-Z])/g," $1")).charAt(0).toUpperCase()+t.slice(1)},getClaimType:function(t){var e=this;return c()(a.a.mark(function s(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BridgeProtocol.Services.Claim.getType(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},s,e)}))()},getClaimTypes:function(t){var e=this;return c()(a.a.mark(function s(){var r,n,i;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t){s.next=2;break}return s.abrupt("return",[]);case 2:r=[],n=0;case 4:if(!(n<t.length)){s.next=12;break}return s.next=7,e.getClaimType(t[n]);case 7:(i=s.sent)&&r.push(i);case 9:n++,s.next=4;break;case 12:return s.abrupt("return",r);case 13:case"end":return s.stop()}},s,e)}))()},getFullClaimsInfo:function(t){var e=this;return c()(a.a.mark(function s(){var r;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t){s.next=2;break}return s.abrupt("return",null);case 2:r=0;case 3:if(!(r<t.length)){s.next=10;break}return s.next=6,e.getFullClaimInfo(t[r]);case 6:t[r]=s.sent;case 7:r++,s.next=3;break;case 10:return s.abrupt("return",t);case 11:case"end":return s.stop()}},s,e)}))()},getFullClaimInfo:function(t){var e=this;return c()(a.a.mark(function s(){var r,n;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.id=Math.random().toString(36).substring(2)+Date.now().toString(36),t.verifiedOn=e.getReadableDate(t.createdOn),0==t.expiresOn?t.expireDate="Never":t.expireDate=e.getReadableDate(t.expiresOn),t.claimTypeName=t.claimTypeId,s.next=6,BridgeProtocol.Services.Claim.getType(t.claimTypeId);case 6:return(r=s.sent)&&(t.claimTypeName=r.name),s.next=10,BridgeProtocol.Utils.Crypto.getPassportIdForPublicKey(t.signedByKey);case 10:return t.signedById=s.sent,t.signedByName=t.signedById,s.next=14,BridgeProtocol.Services.Partner.getPartner(t.signedById);case 14:return(n=s.sent)&&(t.signedByName=n.name),s.abrupt("return",t);case 17:case"end":return s.stop()}},s,e)}))()},getPassportDetails:function(t,e,s){var r=this;return c()(a.a.mark(function n(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,BridgeProtocol.Services.Passport.getDetails(t,e,s);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n,r)}))()},createAuthRequest:function(t,e,s,r){var n=this;return c()(a.a.mark(function i(){return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,BridgeProtocol.Messaging.Auth.createPassportChallengeRequest(t,e,s,r,[]);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i,n)}))()},validateAuthRequest:function(t){var e=this;return c()(a.a.mark(function s(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BridgeProtocol.Messaging.Auth.verifyPassportChallengeRequest(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},s,e)}))()},createAuthResponse:function(t,e,s,r){var n=this;return c()(a.a.mark(function i(){var o,c;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getDecryptedClaims(r,e);case 2:return o=a.sent,c=[],a.next=6,BridgeProtocol.Messaging.Auth.createPassportChallengeResponse(t,e,s.publicKey,s.payload.token,o,c);case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}},i,n)}))()},validateAuthResponse:function(t,e,s,r){var n=this;return c()(a.a.mark(function i(){return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,BridgeProtocol.Messaging.Auth.verifyPassportChallengeResponse(t,e,r,s);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},i,n)}))()},waitGetAuthResponse:function(t){var e=this;return c()(a.a.mark(function s(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new i.a(function(e,s){!function(){var s=c()(a.a.mark(function s(){var n;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,BridgeProtocol.Services.RequestRelay.getResponse(t);case 2:if(!(n=s.sent)||!n.response){s.next=6;break}return console.log("Response found"),s.abrupt("return",e(n.response));case 6:console.log("Response not found. Waiting and retrying."),setTimeout(r,5e3);case 8:case"end":return s.stop()}},s,this)}));function r(){return s.apply(this,arguments)}return r}()()}));case 1:case"end":return e.stop()}},s,e)}))()},waitVerifyPayment:function(t,e,s,r,n,o){var l=this;return c()(a.a.mark(function u(){return a.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",new i.a(function(i,l){!function(){var l=c()(a.a.mark(function c(){var l;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,BridgeProtocol.Services.Blockchain.verifyPayment(t,e,s,r,n,o);case 2:if(!(l=a.sent).complete){a.next=6;break}return console.log("Transaction found and complete"),a.abrupt("return",i(l.success));case 6:console.log("Transaction not complete. Waiting and retrying."),setTimeout(u,15e3);case 8:case"end":return a.stop()}},c,this)}));function u(){return l.apply(this,arguments)}return u}()()}));case 1:case"end":return l.stop()}},u,l)}))()},getBlockchainClaimPublishStatus:function(t,e,s,r){var n=this;return c()(a.a.mark(function i(){var o,c,l;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o={status:0,text:n.getClaimPublishStatusText(0)},a.next=3,n.getPendingClaimPublishStatus(t,e,s.network,r);case 3:if((c=a.sent)&&(o=c),2==o.status||3==o.status){a.next=10;break}return a.next=8,BridgeProtocol.Services.Blockchain.getClaim(s.network,r,s.address);case 8:(l=a.sent)&&l.claim&&l.verified&&(o.status=1,o.text=l.claim.value);case 10:return a.abrupt("return",o);case 11:case"end":return a.stop()}},i,n)}))()},getPendingClaimPublishStatus:function(t,e,s,r){var n=this;return c()(a.a.mark(function i(){var o,c,l;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,BridgeProtocol.Services.Claim.getPendingClaimPublishList(t,e);case 2:o=a.sent,c=0;case 4:if(!(c<o.length)){a.next=12;break}if(o[c].claimTypeId!==r||o[c].network.toLowerCase()!==s.toLowerCase()){a.next=9;break}return l=2,"neo"===s.toLowerCase()&&9==o[c].status&&(l=3),a.abrupt("return",{id:o[c].id,status:l,text:n.getClaimPublishStatusText(l,o[c].network),txId:o[c].claimPublishTransactionId});case 9:c++,a.next=4;break;case 12:return a.abrupt("return",null);case 13:case"end":return a.stop()}},i,n)}))()},getClaimPublishStatusText:function(t,e){var s=void 0;switch(t){case 1:s="Published";break;case 2:s=e&&"eth"===e.toLowerCase()?"Pending Publish":"Pending Publish Approval";break;case 3:s="Publishing Approved";break;default:s="Not Published"}return s}},new p.default({el:"#app",vuetify:new v.a({theme:{themes:{dark:{primary:"#904099",secondary:"#6155a3",accent:"#3c7fc6",info:"#6155a3",error:"#b71c1c"}}}}),router:F,components:{App:f},template:"<App/>"}),console.log("Vue initialized")}({initialize:function(){document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1)},onDeviceReady:function(){var t=c()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.receivedEvent("deviceready"),O();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),receivedEvent:function(t){console.log("Received Event: "+t)}}).initialize()},O20d:function(t,e,s){t.exports=s.p+"static/img/scan-qr-icon.819b641.png"},ibFO:function(t,e,s){t.exports=s.p+"static/img/bridge-passport.7b3b5a6.png"}},["NHnr"]);
//# sourceMappingURL=app.8db9874e2e48fd6d5420.js.map